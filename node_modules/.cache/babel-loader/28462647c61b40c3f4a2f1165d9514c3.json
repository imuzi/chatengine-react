{"ast":null,"code":"import _regeneratorRuntime from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\n/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { PHOTO_SIZE, PHOTO_THUMBNAIL_SIZE } from '../Constants';\nexport function isMobile() {\n  return isAndroid() || isIOS() || isWindowsPhone();\n}\nexport function isIOS() {\n  var iDevices = ['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod'];\n\n  if (!!navigator.platform && iDevices.indexOf(navigator.platform) > -1) {\n    return true;\n  }\n\n  return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n}\nexport function isAndroid() {\n  var ua = navigator.userAgent.toLowerCase();\n  return ua.indexOf('android') > -1;\n}\nexport function isWindowsPhone() {\n  if (navigator.userAgent.match(/Windows Phone/i)) {\n    return true;\n  }\n\n  if (navigator.userAgent.match(/iemobile/i)) {\n    return true;\n  }\n\n  if (navigator.userAgent.match(/WPDesktop/i)) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction isAppleDevice() {\n  var iDevices = ['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod', 'MacIntel'];\n\n  if (!!navigator.platform) {\n    return iDevices.indexOf(navigator.platform) > -1;\n  }\n\n  return /iPad|iPhone|iPod|Mac\\sOS\\sX/.test(navigator.userAgent) && !window.MSStream;\n}\n\nfunction getOSName() {\n  var OSName = 'Unknown';\n  if (window.navigator.userAgent.indexOf('Windows NT 10.0') !== -1) OSName = 'Windows 10';\n  if (window.navigator.userAgent.indexOf('Windows NT 6.2') !== -1) OSName = 'Windows 8';\n  if (window.navigator.userAgent.indexOf('Windows NT 6.1') !== -1) OSName = 'Windows 7';\n  if (window.navigator.userAgent.indexOf('Windows NT 6.0') !== -1) OSName = 'Windows Vista';\n  if (window.navigator.userAgent.indexOf('Windows NT 5.1') !== -1) OSName = 'Windows XP';\n  if (window.navigator.userAgent.indexOf('Windows NT 5.0') !== -1) OSName = 'Windows 2000';\n  if (window.navigator.userAgent.indexOf('Mac') !== -1) OSName = 'Mac/iOS';\n  if (window.navigator.userAgent.indexOf('X11') !== -1) OSName = 'UNIX';\n  if (window.navigator.userAgent.indexOf('Linux') !== -1) OSName = 'Linux';\n  return OSName;\n}\n\nfunction getBrowser() {\n  var browser_name = '';\n  var isIE =\n  /*@cc_on!@*/\n  false || !!document.documentMode;\n  var isEdge = !isIE && !!window.StyleMedia;\n\n  if (navigator.userAgent.indexOf('Chrome') !== -1 && !isEdge) {\n    browser_name = 'Chrome';\n  } else if (navigator.userAgent.indexOf('Safari') !== -1 && !isEdge) {\n    browser_name = 'Safari';\n  } else if (navigator.userAgent.indexOf('Firefox') !== -1) {\n    browser_name = 'Firefox';\n  } else if (navigator.userAgent.indexOf('MSIE') !== -1 || !!document.documentMode === true) {\n    //IF IE > 10\n    browser_name = 'IE';\n  } else if (isEdge) {\n    browser_name = 'Edge';\n  } else {\n    browser_name = 'Unknown';\n  }\n\n  return browser_name;\n}\n\nfunction stringToBoolean(string) {\n  switch (string.toLowerCase().trim()) {\n    case 'true':\n    case 'yes':\n    case '1':\n      return true;\n\n    case 'false':\n    case 'no':\n    case '0':\n    case null:\n      return false;\n\n    default:\n      return Boolean(string);\n  }\n}\n\nfunction orderCompare(order1, order2) {\n  var diff = order1.length - order2.length;\n  if (diff !== 0) return diff < 0 ? -1 : 1;\n  if (order1 === order2) return 0;\n  return order1 > order2 ? 1 : -1;\n}\n\nfunction getPhotoThumbnailSize(sizes) {\n  return getSize(sizes, PHOTO_THUMBNAIL_SIZE);\n}\n\nfunction getPhotoSize(sizes) {\n  var displaySize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : PHOTO_SIZE;\n  return getSize(sizes, displaySize);\n}\n\nfunction getSize(sizes, dimension) {\n  if (!sizes) return null;\n  if (sizes.length === 0) return null;\n  if (dimension === 0) return null; // let iSize = sizes[2];//.find(x => x.type === 'i');\n  // if (iSize){\n  //     return iSize;\n  // }\n\n  var useWidth = sizes[0].width >= sizes[0].height;\n  var diff = Math.abs(dimension - (useWidth ? sizes[0].width : sizes[0].height));\n  var index = 0;\n\n  for (var i = 1; i < sizes.length; i++) {\n    if (sizes[i].type === 'i' && !sizes[i].photo.local.is_downloading_completed) {\n      continue;\n    }\n\n    var currDiff = Math.abs(dimension - (useWidth ? sizes[i].width : sizes[i].height));\n\n    if (currDiff < diff) {\n      index = i;\n      currDiff = diff;\n    }\n  }\n\n  return sizes[index];\n}\n\nfunction getFitSize(size, max) {\n  var increaseToMax = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  if (!size) return {\n    width: 0,\n    height: 0\n  };\n\n  if (!increaseToMax) {\n    if (size.width < max && size.height < max) {\n      return size;\n    }\n  }\n\n  if (size.width > size.height) {\n    return {\n      width: max,\n      height: Math.floor(size.height * max / size.width)\n    };\n  }\n\n  return {\n    width: Math.floor(size.width * max / size.height),\n    height: max\n  };\n}\n\nfunction itemsInView(scrollContainerRef, itemsContainerRef) {\n  var scrollContainer = scrollContainerRef.current;\n  var itemsContainer = itemsContainerRef ? itemsContainerRef.current : scrollContainer;\n  var items = [];\n\n  for (var i = 0; i < itemsContainer.children.length; i++) {\n    var child = itemsContainer.children[i];\n\n    if (child.offsetTop + child.offsetHeight >= scrollContainer.scrollTop && child.offsetTop <= scrollContainer.scrollTop + scrollContainer.offsetHeight) {\n      items.push(i);\n    }\n  }\n\n  return items;\n} // Returns a function, that, when invoked, will only be triggered at most once\n// during a given window of time. Normally, the throttled function will run\n// as much as it can, without ever going more than once per `wait` duration;\n// but if you'd like to disable the execution on the leading edge, pass\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\n\n\nfunction throttle(func, wait, options) {\n  var context, args, result;\n  var timeout = null;\n  var previous = 0;\n  if (!options) options = {};\n\n  var later = function later() {\n    previous = options.leading === false ? 0 : Date.now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n\n  return function () {\n    var now = Date.now();\n    if (!previous && options.leading === false) previous = now;\n    var remaining = wait - (now - previous);\n    context = this;\n    args = arguments;\n\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n\n      previous = now;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n\n    return result;\n  };\n} // Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n\n\nfunction debounce(func, wait, immediate) {\n  var timeout;\n  return function () {\n    var context = this,\n        args = arguments;\n\n    var later = function later() {\n      timeout = null;\n\n      if (!immediate) {\n        func.apply(context, args);\n      }\n    };\n\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n\n    if (callNow) {\n      func.apply(context, args);\n    }\n  };\n}\n\nexport function getFirstLetter(str) {\n  if (!str) return '';\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = str[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _char = _step.value;\n\n      if (_char.toUpperCase() !== _char.toLowerCase()) {\n        return _char;\n      } else if (_char >= '0' && _char <= '9') {\n        return _char;\n      } else if (_char.length > 1) {\n        return _char;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return '';\n}\n\nfunction getLetters(title) {\n  if (!title) return null;\n  if (title.length === 0) return null;\n  var split = title.split(' ');\n\n  if (split.length === 1) {\n    return getFirstLetter(split[0]);\n  }\n\n  if (split.length > 1) {\n    return getFirstLetter(split[0]) + getFirstLetter(split[split.length - 1]);\n  }\n\n  return null;\n}\n\nfunction readImageSize(_x) {\n  return _readImageSize.apply(this, arguments);\n}\n/**\n * use this to make a Base64 encoded string URL friendly,\n * i.e. '+' and '/' are replaced with '-' and '_' also any trailing '='\n * characters are removed\n *\n * @param {String} str the encoded string\n * @returns {String} the URL friendly encoded String\n */\n\n\nfunction _readImageSize() {\n  _readImageSize = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(file) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n              var useBlob = false;\n              var reader = new FileReader();\n              reader.addEventListener('load', function () {\n                try {\n                  var image = new Image();\n                  image.addEventListener('load', function () {\n                    var width = image.width,\n                        height = image.height;\n\n                    if (useBlob) {\n                      window.URL.revokeObjectURL(image.src);\n                    }\n\n                    console.log('[photo]', width, height);\n                    resolve([width, height]);\n                  });\n                  image.src = useBlob ? window.URL.createObjectURL(file) : reader.result;\n                } catch (_unused) {\n                  reject();\n                }\n              });\n              reader.readAsDataURL(file);\n            }));\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _readImageSize.apply(this, arguments);\n}\n\nfunction Base64EncodeUrl(str) {\n  return str.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/\\=+$/, '');\n}\n/**\n * Use this to recreate a Base64 encoded string that was made URL friendly\n * using Base64EncodeurlFriendly.\n * '-' and '_' are replaced with '+' and '/' and also it is padded with '+'\n *\n * @param {String} str the encoded string\n * @returns {String} the URL friendly encoded String\n */\n\n\nfunction Base64DecodeUrl(str) {\n  str = (str + '===').slice(0, str.length + str.length % 4);\n  return str.replace(/-/g, '+').replace(/_/g, '/');\n}\n\nfunction arrayBufferToBase64(buffer) {\n  var binary = '';\n  var bytes = new Uint8Array(buffer);\n  var len = bytes.byteLength;\n\n  for (var i = 0; i < len; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n\n  return Base64EncodeUrl(window.btoa(binary));\n}\n\nfunction isAuthorizationReady(state) {\n  if (!state) return false;\n  return state['@type'] === 'authorizationStateReady';\n}\n\nfunction between(item, first, last) {\n  var inclusive = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  return inclusive ? item >= first && item <= last : item > first && item < last;\n}\n\nfunction clamp(item, first, last) {\n  if (item < first) return first;\n  if (item > last) return last;\n  return item;\n}\n\nfunction getDurationString(secondsTotal) {\n  var hours = Math.floor(secondsTotal / 3600);\n  var minutes = Math.floor((secondsTotal - hours * 3600) / 60);\n  var seconds = secondsTotal - hours * 3600 - minutes * 60;\n\n  if (hours > 0 && minutes < 10) {\n    minutes = '0' + minutes;\n  }\n\n  if (seconds < 10) {\n    seconds = '0' + seconds;\n  }\n\n  return (hours > 0 ? hours + ':' : '') + minutes + ':' + seconds;\n}\n\nexport function getRandomInt(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive\n}\n\nfunction historyEquals(first, second) {\n  if (!first && second) return false;\n  if (first && !second) return false;\n  if (!first && !second) return true;\n  if (first.length === 0 && second.length === 0) return true;\n  return first === second;\n}\n\nfunction insertByOrder(array, element, comparator) {\n  var i = 0;\n\n  for (; i < array.length && comparator(array[i], element) < 0; i++) {}\n\n  return [].concat(_toConsumableArray(array.slice(0, i)), [element], _toConsumableArray(array.slice(i)));\n}\n\nexport { getBrowser, getOSName, stringToBoolean, orderCompare, getSize, getPhotoThumbnailSize, getPhotoSize, getFitSize, itemsInView, throttle, debounce, getLetters, readImageSize, arrayBufferToBase64, isAuthorizationReady, between, clamp, getDurationString, isAppleDevice, historyEquals, insertByOrder };","map":{"version":3,"sources":["/Users/wubenqi/nebula-chat/telegram-react/src/Utils/Common.js"],"names":["PHOTO_SIZE","PHOTO_THUMBNAIL_SIZE","isMobile","isAndroid","isIOS","isWindowsPhone","iDevices","navigator","platform","indexOf","test","userAgent","window","MSStream","ua","toLowerCase","match","isAppleDevice","getOSName","OSName","getBrowser","browser_name","isIE","document","documentMode","isEdge","StyleMedia","stringToBoolean","string","trim","Boolean","orderCompare","order1","order2","diff","length","getPhotoThumbnailSize","sizes","getSize","getPhotoSize","displaySize","dimension","useWidth","width","height","Math","abs","index","i","type","photo","local","is_downloading_completed","currDiff","getFitSize","size","max","increaseToMax","floor","itemsInView","scrollContainerRef","itemsContainerRef","scrollContainer","current","itemsContainer","items","children","child","offsetTop","offsetHeight","scrollTop","push","throttle","func","wait","options","context","args","result","timeout","previous","later","leading","Date","now","apply","remaining","arguments","clearTimeout","trailing","setTimeout","debounce","immediate","callNow","getFirstLetter","str","char","toUpperCase","getLetters","title","split","readImageSize","file","Promise","resolve","reject","useBlob","reader","FileReader","addEventListener","image","Image","URL","revokeObjectURL","src","console","log","createObjectURL","readAsDataURL","Base64EncodeUrl","replace","Base64DecodeUrl","slice","arrayBufferToBase64","buffer","binary","bytes","Uint8Array","len","byteLength","String","fromCharCode","btoa","isAuthorizationReady","state","between","item","first","last","inclusive","clamp","getDurationString","secondsTotal","hours","minutes","seconds","getRandomInt","min","ceil","random","historyEquals","second","insertByOrder","array","element","comparator"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { PHOTO_SIZE, PHOTO_THUMBNAIL_SIZE } from '../Constants';\n\nexport function isMobile() {\n    return isAndroid() || isIOS() || isWindowsPhone();\n}\n\nexport function isIOS() {\n    const iDevices = ['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod'];\n\n    if (!!navigator.platform && iDevices.indexOf(navigator.platform) > -1) {\n        return true;\n    }\n\n    return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n}\n\nexport function isAndroid() {\n    const ua = navigator.userAgent.toLowerCase();\n    return ua.indexOf('android') > -1;\n}\n\nexport function isWindowsPhone() {\n    if (navigator.userAgent.match(/Windows Phone/i)) {\n        return true;\n    }\n\n    if (navigator.userAgent.match(/iemobile/i)) {\n        return true;\n    }\n\n    if (navigator.userAgent.match(/WPDesktop/i)) {\n        return true;\n    }\n\n    return false;\n}\n\nfunction isAppleDevice() {\n    const iDevices = ['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod', 'MacIntel'];\n\n    if (!!navigator.platform) {\n        return iDevices.indexOf(navigator.platform) > -1;\n    }\n\n    return /iPad|iPhone|iPod|Mac\\sOS\\sX/.test(navigator.userAgent) && !window.MSStream;\n}\n\nfunction getOSName() {\n    let OSName = 'Unknown';\n    if (window.navigator.userAgent.indexOf('Windows NT 10.0') !== -1) OSName = 'Windows 10';\n    if (window.navigator.userAgent.indexOf('Windows NT 6.2') !== -1) OSName = 'Windows 8';\n    if (window.navigator.userAgent.indexOf('Windows NT 6.1') !== -1) OSName = 'Windows 7';\n    if (window.navigator.userAgent.indexOf('Windows NT 6.0') !== -1) OSName = 'Windows Vista';\n    if (window.navigator.userAgent.indexOf('Windows NT 5.1') !== -1) OSName = 'Windows XP';\n    if (window.navigator.userAgent.indexOf('Windows NT 5.0') !== -1) OSName = 'Windows 2000';\n    if (window.navigator.userAgent.indexOf('Mac') !== -1) OSName = 'Mac/iOS';\n    if (window.navigator.userAgent.indexOf('X11') !== -1) OSName = 'UNIX';\n    if (window.navigator.userAgent.indexOf('Linux') !== -1) OSName = 'Linux';\n\n    return OSName;\n}\n\nfunction getBrowser() {\n    let browser_name = '';\n    let isIE = /*@cc_on!@*/ false || !!document.documentMode;\n    let isEdge = !isIE && !!window.StyleMedia;\n    if (navigator.userAgent.indexOf('Chrome') !== -1 && !isEdge) {\n        browser_name = 'Chrome';\n    } else if (navigator.userAgent.indexOf('Safari') !== -1 && !isEdge) {\n        browser_name = 'Safari';\n    } else if (navigator.userAgent.indexOf('Firefox') !== -1) {\n        browser_name = 'Firefox';\n    } else if (navigator.userAgent.indexOf('MSIE') !== -1 || !!document.documentMode === true) {\n        //IF IE > 10\n        browser_name = 'IE';\n    } else if (isEdge) {\n        browser_name = 'Edge';\n    } else {\n        browser_name = 'Unknown';\n    }\n\n    return browser_name;\n}\n\nfunction stringToBoolean(string) {\n    switch (string.toLowerCase().trim()) {\n        case 'true':\n        case 'yes':\n        case '1':\n            return true;\n        case 'false':\n        case 'no':\n        case '0':\n        case null:\n            return false;\n        default:\n            return Boolean(string);\n    }\n}\n\nfunction orderCompare(order1, order2) {\n    let diff = order1.length - order2.length;\n    if (diff !== 0) return diff < 0 ? -1 : 1;\n    if (order1 === order2) return 0;\n\n    return order1 > order2 ? 1 : -1;\n}\n\nfunction getPhotoThumbnailSize(sizes) {\n    return getSize(sizes, PHOTO_THUMBNAIL_SIZE);\n}\n\nfunction getPhotoSize(sizes, displaySize = PHOTO_SIZE) {\n    return getSize(sizes, displaySize);\n}\n\nfunction getSize(sizes, dimension) {\n    if (!sizes) return null;\n    if (sizes.length === 0) return null;\n    if (dimension === 0) return null;\n\n    // let iSize = sizes[2];//.find(x => x.type === 'i');\n    // if (iSize){\n    //     return iSize;\n    // }\n\n    let useWidth = sizes[0].width >= sizes[0].height;\n    let diff = Math.abs(dimension - (useWidth ? sizes[0].width : sizes[0].height));\n    let index = 0;\n    for (let i = 1; i < sizes.length; i++) {\n        if (sizes[i].type === 'i' && !sizes[i].photo.local.is_downloading_completed) {\n            continue;\n        }\n\n        let currDiff = Math.abs(dimension - (useWidth ? sizes[i].width : sizes[i].height));\n        if (currDiff < diff) {\n            index = i;\n            currDiff = diff;\n        }\n    }\n\n    return sizes[index];\n}\n\nfunction getFitSize(size, max, increaseToMax = true) {\n    if (!size) return { width: 0, height: 0 };\n\n    if (!increaseToMax) {\n        if (size.width < max && size.height < max) {\n            return size;\n        }\n    }\n\n    if (size.width > size.height) {\n        return { width: max, height: Math.floor((size.height * max) / size.width) };\n    }\n\n    return { width: Math.floor((size.width * max) / size.height), height: max };\n}\n\nfunction itemsInView(scrollContainerRef, itemsContainerRef) {\n    let scrollContainer = scrollContainerRef.current;\n    let itemsContainer = itemsContainerRef ? itemsContainerRef.current : scrollContainer;\n\n    const items = [];\n    for (let i = 0; i < itemsContainer.children.length; i++) {\n        let child = itemsContainer.children[i];\n        if (\n            child.offsetTop + child.offsetHeight >= scrollContainer.scrollTop &&\n            child.offsetTop <= scrollContainer.scrollTop + scrollContainer.offsetHeight\n        ) {\n            items.push(i);\n        }\n    }\n\n    return items;\n}\n\n// Returns a function, that, when invoked, will only be triggered at most once\n// during a given window of time. Normally, the throttled function will run\n// as much as it can, without ever going more than once per `wait` duration;\n// but if you'd like to disable the execution on the leading edge, pass\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\nfunction throttle(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) options = {};\n    var later = function() {\n        previous = options.leading === false ? 0 : Date.now();\n        timeout = null;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n    };\n    return function() {\n        var now = Date.now();\n        if (!previous && options.leading === false) previous = now;\n        var remaining = wait - (now - previous);\n        context = this;\n        args = arguments;\n        if (remaining <= 0 || remaining > wait) {\n            if (timeout) {\n                clearTimeout(timeout);\n                timeout = null;\n            }\n            previous = now;\n            result = func.apply(context, args);\n            if (!timeout) context = args = null;\n        } else if (!timeout && options.trailing !== false) {\n            timeout = setTimeout(later, remaining);\n        }\n        return result;\n    };\n}\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nfunction debounce(func, wait, immediate) {\n    var timeout;\n    return function() {\n        var context = this,\n            args = arguments;\n        var later = function() {\n            timeout = null;\n            if (!immediate) {\n                func.apply(context, args);\n            }\n        };\n        var callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) {\n            func.apply(context, args);\n        }\n    };\n}\n\nexport function getFirstLetter(str) {\n    if (!str) return '';\n\n    for (let char of str) {\n        if (char.toUpperCase() !== char.toLowerCase()) {\n            return char;\n        } else if (char >= '0' && char <= '9') {\n            return char;\n        } else if (char.length > 1) {\n            return char;\n        }\n    }\n\n    return '';\n}\n\nfunction getLetters(title) {\n    if (!title) return null;\n    if (title.length === 0) return null;\n\n    const split = title.split(' ');\n    if (split.length === 1) {\n        return getFirstLetter(split[0]);\n    }\n    if (split.length > 1) {\n        return getFirstLetter(split[0]) + getFirstLetter(split[split.length - 1]);\n    }\n\n    return null;\n}\n\nasync function readImageSize(file) {\n    return new Promise((resolve, reject) => {\n        let useBlob = false;\n        const reader = new FileReader();\n\n        reader.addEventListener('load', function() {\n            try {\n                const image = new Image();\n                image.addEventListener('load', function() {\n                    const { width, height } = image;\n                    if (useBlob) {\n                        window.URL.revokeObjectURL(image.src);\n                    }\n\n                    console.log('[photo]', width, height);\n                    resolve([width, height]);\n                });\n\n                image.src = useBlob ? window.URL.createObjectURL(file) : reader.result;\n            } catch {\n                reject();\n            }\n        });\n\n        reader.readAsDataURL(file);\n    });\n}\n\n/**\n * use this to make a Base64 encoded string URL friendly,\n * i.e. '+' and '/' are replaced with '-' and '_' also any trailing '='\n * characters are removed\n *\n * @param {String} str the encoded string\n * @returns {String} the URL friendly encoded String\n */\nfunction Base64EncodeUrl(str) {\n    return str\n        .replace(/\\+/g, '-')\n        .replace(/\\//g, '_')\n        .replace(/\\=+$/, '');\n}\n\n/**\n * Use this to recreate a Base64 encoded string that was made URL friendly\n * using Base64EncodeurlFriendly.\n * '-' and '_' are replaced with '+' and '/' and also it is padded with '+'\n *\n * @param {String} str the encoded string\n * @returns {String} the URL friendly encoded String\n */\nfunction Base64DecodeUrl(str) {\n    str = (str + '===').slice(0, str.length + (str.length % 4));\n    return str.replace(/-/g, '+').replace(/_/g, '/');\n}\n\nfunction arrayBufferToBase64(buffer) {\n    var binary = '';\n    var bytes = new Uint8Array(buffer);\n    var len = bytes.byteLength;\n    for (var i = 0; i < len; i++) {\n        binary += String.fromCharCode(bytes[i]);\n    }\n    return Base64EncodeUrl(window.btoa(binary));\n}\n\nfunction isAuthorizationReady(state) {\n    if (!state) return false;\n\n    return state['@type'] === 'authorizationStateReady';\n}\n\nfunction between(item, first, last, inclusive = false) {\n    return inclusive ? item >= first && item <= last : item > first && item < last;\n}\n\nfunction clamp(item, first, last) {\n    if (item < first) return first;\n    if (item > last) return last;\n\n    return item;\n}\n\nfunction getDurationString(secondsTotal) {\n    let hours = Math.floor(secondsTotal / 3600);\n    let minutes = Math.floor((secondsTotal - hours * 3600) / 60);\n    let seconds = secondsTotal - hours * 3600 - minutes * 60;\n\n    if (hours > 0 && minutes < 10) {\n        minutes = '0' + minutes;\n    }\n    if (seconds < 10) {\n        seconds = '0' + seconds;\n    }\n\n    return (hours > 0 ? hours + ':' : '') + minutes + ':' + seconds;\n}\n\nexport function getRandomInt(min, max) {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive\n}\n\nfunction historyEquals(first, second) {\n    if (!first && second) return false;\n    if (first && !second) return false;\n\n    if (!first && !second) return true;\n    if (first.length === 0 && second.length === 0) return true;\n\n    return first === second;\n}\n\nfunction insertByOrder(array, element, comparator) {\n    let i = 0;\n    for (; i < array.length && comparator(array[i], element) < 0; i++) {}\n\n    return [...array.slice(0, i), element, ...array.slice(i)];\n}\n\nexport {\n    getBrowser,\n    getOSName,\n    stringToBoolean,\n    orderCompare,\n    getSize,\n    getPhotoThumbnailSize,\n    getPhotoSize,\n    getFitSize,\n    itemsInView,\n    throttle,\n    debounce,\n    getLetters,\n    readImageSize,\n    arrayBufferToBase64,\n    isAuthorizationReady,\n    between,\n    clamp,\n    getDurationString,\n    isAppleDevice,\n    historyEquals,\n    insertByOrder\n};\n"]},"metadata":{},"sourceType":"module"}