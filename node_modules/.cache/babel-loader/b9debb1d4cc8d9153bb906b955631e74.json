{"ast":null,"code":"import _classCallCheck from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/wubenqi/nebula-chat/telegram-react/src/Components/Tile/Session.js\";\n\n/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuList from '@material-ui/core/MenuList';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Popover from '@material-ui/core/Popover';\nimport StopIcon from '../../Assets/Icons/Stop';\nimport { getMessageDate } from '../../Utils/Chat';\nimport './Session.css';\n\nvar Session =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Session, _React$Component);\n\n  function Session() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Session);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Session)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      contextMenu: false,\n      left: 0,\n      top: 0\n    };\n\n    _this.handleContextMenu = function (event) {\n      if (event) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n\n      var session = _this.props.session;\n      if (!session) return;\n      if (session.is_current) return;\n      var contextMenu = _this.state.contextMenu;\n\n      if (contextMenu) {\n        _this.setState({\n          contextMenu: false\n        });\n      } else {\n        var left = event.clientX;\n        var top = event.clientY;\n\n        _this.setState({\n          contextMenu: true,\n          left: left,\n          top: top\n        });\n      }\n    };\n\n    _this.handleCloseContextMenu = function (event) {\n      _this.setState({\n        contextMenu: false,\n        left: 0,\n        top: 0\n      });\n    };\n\n    _this.handleTerminate = function (event) {\n      _this.handleCloseContextMenu(event);\n\n      var _this$props = _this.props,\n          onTerminate = _this$props.onTerminate,\n          session = _this$props.session;\n      onTerminate(session);\n    };\n\n    return _this;\n  }\n\n  _createClass(Session, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          session = _this$props2.session,\n          t = _this$props2.t;\n      if (!session) return null;\n      var _this$state = this.state,\n          left = _this$state.left,\n          top = _this$state.top,\n          contextMenu = _this$state.contextMenu;\n      var is_current = session.is_current,\n          application_name = session.application_name,\n          application_version = session.application_version,\n          device_model = session.device_model,\n          platform = session.platform,\n          system_version = session.system_version,\n          ip = session.ip,\n          region = session.region,\n          country = session.country,\n          last_active_date = session.last_active_date;\n      var showDate = !is_current;\n      return React.createElement(React.Fragment, null, React.createElement(ListItem, {\n        className: \"settings-list-item\",\n        button: true,\n        onContextMenu: this.handleContextMenu,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"session\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"session-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"session-app\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \"\".concat(application_name, \" \").concat(application_version)), showDate && React.createElement(\"div\", {\n        className: \"session-date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, getMessageDate({\n        date: last_active_date\n      }))), React.createElement(\"div\", {\n        className: \"session-subtitle1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"\".concat(device_model, \", \").concat(platform, \" \").concat(system_version)), React.createElement(\"div\", {\n        className: \"session-subtitle2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"\".concat(ip, \" - \"), region && \"\".concat(region, \", \"), country && \"\".concat(country)))), React.createElement(Popover, {\n        open: contextMenu,\n        onClose: this.handleCloseContextMenu,\n        anchorReference: \"anchorPosition\",\n        anchorPosition: {\n          top: top,\n          left: left\n        },\n        anchorOrigin: {\n          vertical: 'bottom',\n          horizontal: 'right'\n        },\n        transformOrigin: {\n          vertical: 'top',\n          horizontal: 'left'\n        },\n        onMouseDown: function onMouseDown(e) {\n          return e.stopPropagation();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(MenuList, {\n        onClick: function onClick(e) {\n          return e.stopPropagation();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(MenuItem, {\n        onClick: this.handleTerminate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(ListItemIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(StopIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      })), React.createElement(ListItemText, {\n        primary: t('Terminate'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return Session;\n}(React.Component);\n\nSession.propTypes = {\n  session: PropTypes.object.isRequired,\n  onTerminate: PropTypes.func.isRequired\n};\nexport default withTranslation()(Session);","map":{"version":3,"sources":["/Users/wubenqi/nebula-chat/telegram-react/src/Components/Tile/Session.js"],"names":["React","PropTypes","withTranslation","ListItem","ListItemIcon","ListItemText","MenuList","MenuItem","Popover","StopIcon","getMessageDate","Session","state","contextMenu","left","top","handleContextMenu","event","preventDefault","stopPropagation","session","props","is_current","setState","clientX","clientY","handleCloseContextMenu","handleTerminate","onTerminate","t","application_name","application_version","device_model","platform","system_version","ip","region","country","last_active_date","showDate","date","vertical","horizontal","e","Component","propTypes","object","isRequired","func"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuList from '@material-ui/core/MenuList';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Popover from '@material-ui/core/Popover';\nimport StopIcon from '../../Assets/Icons/Stop';\nimport { getMessageDate } from '../../Utils/Chat';\nimport './Session.css';\n\nclass Session extends React.Component {\n    state = {\n        contextMenu: false,\n        left: 0,\n        top: 0\n    };\n\n    handleContextMenu = event => {\n        if (event) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n\n        const { session } = this.props;\n        if (!session) return;\n        if (session.is_current) return;\n\n        const { contextMenu } = this.state;\n\n        if (contextMenu) {\n            this.setState({ contextMenu: false });\n        } else {\n            const left = event.clientX;\n            const top = event.clientY;\n\n            this.setState({\n                contextMenu: true,\n                left,\n                top\n            });\n        }\n    };\n\n    handleCloseContextMenu = event => {\n        this.setState({\n            contextMenu: false,\n            left: 0,\n            top: 0\n        });\n    };\n\n    handleTerminate = event => {\n        this.handleCloseContextMenu(event);\n\n        const { onTerminate, session } = this.props;\n\n        onTerminate(session);\n    };\n\n    render() {\n        const { session, t } = this.props;\n        if (!session) return null;\n\n        const { left, top, contextMenu } = this.state;\n        const {\n            is_current,\n            application_name,\n            application_version,\n            device_model,\n            platform,\n            system_version,\n            ip,\n            region,\n            country,\n            last_active_date\n        } = session;\n        const showDate = !is_current;\n\n        return (\n            <>\n                <ListItem className='settings-list-item' button onContextMenu={this.handleContextMenu}>\n                    <div className='session'>\n                        <div className='session-title'>\n                            <div className='session-app'>{`${application_name} ${application_version}`}</div>\n                            {showDate && (\n                                <div className='session-date'>{getMessageDate({ date: last_active_date })}</div>\n                            )}\n                        </div>\n                        <div className='session-subtitle1'>{`${device_model}, ${platform} ${system_version}`}</div>\n                        <div className='session-subtitle2'>\n                            {`${ip} - `}\n                            {region && `${region}, `}\n                            {country && `${country}`}\n                        </div>\n                    </div>\n                </ListItem>\n                <Popover\n                    open={contextMenu}\n                    onClose={this.handleCloseContextMenu}\n                    anchorReference='anchorPosition'\n                    anchorPosition={{ top, left }}\n                    anchorOrigin={{\n                        vertical: 'bottom',\n                        horizontal: 'right'\n                    }}\n                    transformOrigin={{\n                        vertical: 'top',\n                        horizontal: 'left'\n                    }}\n                    onMouseDown={e => e.stopPropagation()}>\n                    <MenuList onClick={e => e.stopPropagation()}>\n                        <MenuItem onClick={this.handleTerminate}>\n                            <ListItemIcon>\n                                <StopIcon />\n                            </ListItemIcon>\n                            <ListItemText primary={t('Terminate')} />\n                        </MenuItem>\n                    </MenuList>\n                </Popover>\n            </>\n        );\n    }\n}\n\nSession.propTypes = {\n    session: PropTypes.object.isRequired,\n    onTerminate: PropTypes.func.isRequired\n};\n\nexport default withTranslation()(Session);\n"]},"metadata":{},"sourceType":"module"}