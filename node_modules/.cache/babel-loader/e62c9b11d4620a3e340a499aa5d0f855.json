{"ast":null,"code":"import _regeneratorRuntime from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/wubenqi/nebula-chat/telegram-react/src/Components/Auth/AuthForm.js\";\n\n/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React from 'react';\nimport Caption from './Caption';\nimport Code from './Code';\nimport Password from './Password';\nimport Phone from './Phone';\nimport AuthErrorDialog from './AuthErrorDialog';\nimport { loadData } from '../../Utils/Phone';\nimport AppStore from '../../Stores/ApplicationStore';\nimport AuthStore from '../../Stores/AuthorizationStore';\nimport './AuthForm.css';\n\nvar AuthForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AuthForm, _React$Component);\n\n  function AuthForm() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AuthForm);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AuthForm)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      data: null\n    };\n    _this.loadContent =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              data = _this.state.data;\n\n              if (!data) {\n                _context.next = 3;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 3:\n              _context.prev = 3;\n              _context.next = 6;\n              return loadData();\n\n            case 6:\n              AuthStore.data = _context.sent;\n\n              _this.setState({\n                data: AuthStore.data\n              });\n\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](3);\n              console.error(_context.t0);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[3, 10]]);\n    }));\n    return _this;\n  }\n\n  _createClass(AuthForm, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      setTimeout(this.loadContent, 100);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var state = this.props.authorizationState;\n      var data = this.state.data;\n      var defaultPhone = AppStore.defaultPhone;\n      var control = null;\n\n      switch (state['@type']) {\n        case 'authorizationStateWaitPhoneNumber':\n        case 'authorizationStateWaitEncryptionKey':\n        case 'authorizationStateWaitTdlibParameters':\n        case 'authorizationStateWaitTdlib':\n          {\n            control = React.createElement(Phone, {\n              defaultPhone: defaultPhone,\n              data: data,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 52\n              },\n              __self: this\n            });\n            break;\n          }\n\n        case 'authorizationStateWaitCode':\n          {\n            var onChangePhone = this.props.onChangePhone;\n            var terms_of_service = state.terms_of_service,\n                code_info = state.code_info;\n            control = React.createElement(Code, {\n              termsOfService: terms_of_service,\n              codeInfo: code_info,\n              onChangePhone: onChangePhone,\n              data: data,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 60\n              },\n              __self: this\n            });\n            break;\n          }\n\n        case 'authorizationStateWaitPassword':\n          {\n            var _onChangePhone = this.props.onChangePhone;\n            var password_hint = state.password_hint,\n                has_recovery_email_address = state.has_recovery_email_address,\n                recovery_email_address_pattern = state.recovery_email_address_pattern;\n            control = React.createElement(Password, {\n              passwordHint: password_hint,\n              hasRecoveryEmailAddress: has_recovery_email_address,\n              recoveryEmailAddressPattern: recovery_email_address_pattern,\n              onChangePhone: _onChangePhone,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 74\n              },\n              __self: this\n            });\n            break;\n          }\n\n        default:\n          break;\n      }\n\n      return React.createElement(\"div\", {\n        className: \"authorization-form\",\n        onLoad: this.handleLoad,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"authorization-form-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(Caption, {\n        state: state,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }), control), React.createElement(AuthErrorDialog, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return AuthForm;\n}(React.Component);\n\nexport default AuthForm;","map":{"version":3,"sources":["/Users/wubenqi/nebula-chat/telegram-react/src/Components/Auth/AuthForm.js"],"names":["React","Caption","Code","Password","Phone","AuthErrorDialog","loadData","AppStore","AuthStore","AuthForm","state","data","loadContent","setState","console","error","setTimeout","props","authorizationState","defaultPhone","control","onChangePhone","terms_of_service","code_info","password_hint","has_recovery_email_address","recovery_email_address_pattern","handleLoad","Component"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport Caption from './Caption';\nimport Code from './Code';\nimport Password from './Password';\nimport Phone from './Phone';\nimport AuthErrorDialog from './AuthErrorDialog';\nimport { loadData } from '../../Utils/Phone';\nimport AppStore from '../../Stores/ApplicationStore';\nimport AuthStore from '../../Stores/AuthorizationStore';\nimport './AuthForm.css';\n\nclass AuthForm extends React.Component {\n    state = {\n        data: null\n    };\n\n    componentDidMount() {\n        setTimeout(this.loadContent, 100);\n    }\n\n    loadContent = async () => {\n        const { data } = this.state;\n        if (data) return;\n\n        try {\n            AuthStore.data = await loadData();\n\n            this.setState({ data: AuthStore.data });\n        } catch (error) {\n            console.error(error);\n        }\n    };\n\n    render() {\n        const { authorizationState: state } = this.props;\n        const { data } = this.state;\n        const { defaultPhone } = AppStore;\n\n        let control = null;\n        switch (state['@type']) {\n            case 'authorizationStateWaitPhoneNumber':\n            case 'authorizationStateWaitEncryptionKey':\n            case 'authorizationStateWaitTdlibParameters':\n            case 'authorizationStateWaitTdlib': {\n                control = <Phone defaultPhone={defaultPhone} data={data} />;\n                break;\n            }\n            case 'authorizationStateWaitCode': {\n                const { onChangePhone } = this.props;\n                const { terms_of_service, code_info } = state;\n\n                control = (\n                    <Code\n                        termsOfService={terms_of_service}\n                        codeInfo={code_info}\n                        onChangePhone={onChangePhone}\n                        data={data}\n                    />\n                );\n                break;\n            }\n            case 'authorizationStateWaitPassword': {\n                const { onChangePhone } = this.props;\n                const { password_hint, has_recovery_email_address, recovery_email_address_pattern } = state;\n\n                control = (\n                    <Password\n                        passwordHint={password_hint}\n                        hasRecoveryEmailAddress={has_recovery_email_address}\n                        recoveryEmailAddressPattern={recovery_email_address_pattern}\n                        onChangePhone={onChangePhone}\n                    />\n                );\n                break;\n            }\n            default:\n                break;\n        }\n\n        return (\n            <div className='authorization-form' onLoad={this.handleLoad}>\n                <div className='authorization-form-content'>\n                    <Caption state={state} />\n                    {control}\n                </div>\n                <AuthErrorDialog />\n            </div>\n        );\n    }\n}\nexport default AuthForm;\n"]},"metadata":{},"sourceType":"module"}