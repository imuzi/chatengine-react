{"ast":null,"code":"import _regeneratorRuntime from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/wubenqi/nebula-chat/telegram-react/src/Components/ColumnLeft/Settings/Settings.js\";\n\n/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport { compose, withRestoreRef, withSaveRef } from '../../../Utils/HOC';\nimport Main from './Main';\nimport EditProfile from './EditProfile';\nimport General from './General';\nimport Language from '../Language';\nimport Notifications from './Notifications';\nimport PrivacySecurity from './PrivacySecurity';\nimport SidebarPage from '../SidebarPage';\nimport { loadChatsContent } from '../../../Utils/File';\nimport FileStore from '../../../Stores/FileStore';\nimport UserStore from '../../../Stores/UserStore';\nimport TdLibController from '../../../Controllers/TdLibController';\nimport './Settings.css';\n\nvar Settings =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Settings, _React$Component);\n\n  function Settings(props) {\n    var _this;\n\n    _classCallCheck(this, Settings);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Settings).call(this, props));\n\n    _this.openEditProfile = function () {\n      _this.setState({\n        openEditProfile: true\n      });\n    };\n\n    _this.closeEditProfile = function () {\n      _this.setState({\n        openEditProfile: false\n      });\n    };\n\n    _this.openGeneral = function () {\n      _this.setState({\n        openGeneral: true\n      });\n    };\n\n    _this.closeGeneral = function () {\n      _this.setState({\n        openGeneral: false\n      });\n    };\n\n    _this.openNotifications = function () {\n      _this.setState({\n        openNotifications: true\n      });\n    };\n\n    _this.closeNotifications = function () {\n      _this.setState({\n        openNotifications: false\n      });\n    };\n\n    _this.openPrivacySecurity = function () {\n      _this.setState({\n        openPrivacySecurity: true\n      });\n    };\n\n    _this.closePrivacySecurity = function () {\n      _this.setState({\n        openPrivacySecurity: false\n      });\n    };\n\n    _this.openLanguage = function () {\n      _this.setState({\n        openLanguage: true\n      });\n    };\n\n    _this.closeLanguage = function () {\n      _this.setState({\n        openLanguage: false\n      });\n    };\n\n    _this.handleCloseSettings = function () {\n      TdLibController.clientUpdate({\n        '@type': 'clientUpdateSettings',\n        open: false\n      });\n    };\n\n    _this.state = {\n      openEditProfile: false,\n      openGeneral: false,\n      openNotifications: false,\n      openPrivacySecurity: false,\n      openLanguage: false\n    };\n    return _this;\n  }\n\n  _createClass(Settings, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadContent();\n    }\n  }, {\n    key: \"loadContent\",\n    value: function () {\n      var _loadContent = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var chatId, store, result;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                chatId = this.props.chatId;\n                store = FileStore.getStore();\n                loadChatsContent(store, [chatId]);\n                _context.next = 5;\n                return TdLibController.send({\n                  '@type': 'getUserFullInfo',\n                  user_id: UserStore.getMyId()\n                });\n\n              case 5:\n                result = _context.sent;\n                UserStore.setFullInfo(UserStore.getMyId(), result);\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function loadContent() {\n        return _loadContent.apply(this, arguments);\n      }\n\n      return loadContent;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          chatId = _this$props.chatId,\n          popup = _this$props.popup;\n      var _this$state = this.state,\n          openEditProfile = _this$state.openEditProfile,\n          openGeneral = _this$state.openGeneral,\n          openNotifications = _this$state.openNotifications,\n          openPrivacySecurity = _this$state.openPrivacySecurity,\n          openLanguage = _this$state.openLanguage;\n      return React.createElement(React.Fragment, null, React.createElement(Main, {\n        chatId: chatId,\n        popup: popup,\n        onClose: this.handleCloseSettings,\n        onEditProfile: this.openEditProfile,\n        onGeneral: this.openGeneral,\n        onNotifications: this.openNotifications,\n        onPrivacySecurity: this.openPrivacySecurity,\n        onLanguage: this.openLanguage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }), React.createElement(SidebarPage, {\n        open: openEditProfile,\n        onClose: this.closeEditProfile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(EditProfile, {\n        chatId: chatId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      })), React.createElement(SidebarPage, {\n        open: openGeneral,\n        onClose: this.closeGeneral,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(General, {\n        chatId: chatId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      })), React.createElement(SidebarPage, {\n        open: openNotifications,\n        onClose: this.closeNotifications,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(Notifications, {\n        chatId: chatId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      })), React.createElement(SidebarPage, {\n        open: openPrivacySecurity,\n        onClose: this.closePrivacySecurity,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(PrivacySecurity, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      })), React.createElement(SidebarPage, {\n        open: openLanguage,\n        onClose: this.closeLanguage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(Language, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Settings;\n}(React.Component);\n\nSettings.propTypes = {\n  chatId: PropTypes.number,\n  popup: PropTypes.bool\n};\nvar enhance = compose(withSaveRef(), withTranslation(), withRestoreRef());\nexport default enhance(Settings);","map":{"version":3,"sources":["/Users/wubenqi/nebula-chat/telegram-react/src/Components/ColumnLeft/Settings/Settings.js"],"names":["React","PropTypes","withTranslation","compose","withRestoreRef","withSaveRef","Main","EditProfile","General","Language","Notifications","PrivacySecurity","SidebarPage","loadChatsContent","FileStore","UserStore","TdLibController","Settings","props","openEditProfile","setState","closeEditProfile","openGeneral","closeGeneral","openNotifications","closeNotifications","openPrivacySecurity","closePrivacySecurity","openLanguage","closeLanguage","handleCloseSettings","clientUpdate","open","state","loadContent","chatId","store","getStore","send","user_id","getMyId","result","setFullInfo","popup","Component","propTypes","number","bool","enhance"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport { compose, withRestoreRef, withSaveRef } from '../../../Utils/HOC';\nimport Main from './Main';\nimport EditProfile from './EditProfile';\nimport General from './General';\nimport Language from '../Language';\nimport Notifications from './Notifications';\nimport PrivacySecurity from './PrivacySecurity';\nimport SidebarPage from '../SidebarPage';\nimport { loadChatsContent } from '../../../Utils/File';\nimport FileStore from '../../../Stores/FileStore';\nimport UserStore from '../../../Stores/UserStore';\nimport TdLibController from '../../../Controllers/TdLibController';\nimport './Settings.css';\n\nclass Settings extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            openEditProfile: false,\n            openGeneral: false,\n            openNotifications: false,\n            openPrivacySecurity: false,\n            openLanguage: false\n        };\n    }\n\n    componentDidMount() {\n        this.loadContent();\n    }\n\n    async loadContent() {\n        const { chatId } = this.props;\n\n        const store = FileStore.getStore();\n\n        loadChatsContent(store, [chatId]);\n\n        const result = await TdLibController.send({\n            '@type': 'getUserFullInfo',\n            user_id: UserStore.getMyId()\n        });\n\n        UserStore.setFullInfo(UserStore.getMyId(), result);\n    }\n\n    openEditProfile = () => {\n        this.setState({\n            openEditProfile: true\n        });\n    };\n\n    closeEditProfile = () => {\n        this.setState({\n            openEditProfile: false\n        });\n    };\n\n    openGeneral = () => {\n        this.setState({\n            openGeneral: true\n        });\n    };\n\n    closeGeneral = () => {\n        this.setState({\n            openGeneral: false\n        });\n    };\n\n    openNotifications = () => {\n        this.setState({\n            openNotifications: true\n        });\n    };\n\n    closeNotifications = () => {\n        this.setState({\n            openNotifications: false\n        });\n    };\n\n    openPrivacySecurity = () => {\n        this.setState({\n            openPrivacySecurity: true\n        });\n    };\n\n    closePrivacySecurity = () => {\n        this.setState({\n            openPrivacySecurity: false\n        });\n    };\n\n    openLanguage = () => {\n        this.setState({\n            openLanguage: true\n        });\n    };\n\n    closeLanguage = () => {\n        this.setState({\n            openLanguage: false\n        });\n    };\n\n    handleCloseSettings = () => {\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateSettings',\n            open: false\n        });\n    };\n\n    render() {\n        const { chatId, popup } = this.props;\n        const { openEditProfile, openGeneral, openNotifications, openPrivacySecurity, openLanguage } = this.state;\n\n        return (\n            <>\n                <Main\n                    chatId={chatId}\n                    popup={popup}\n                    onClose={this.handleCloseSettings}\n                    onEditProfile={this.openEditProfile}\n                    onGeneral={this.openGeneral}\n                    onNotifications={this.openNotifications}\n                    onPrivacySecurity={this.openPrivacySecurity}\n                    onLanguage={this.openLanguage}\n                />\n                <SidebarPage open={openEditProfile} onClose={this.closeEditProfile}>\n                    <EditProfile chatId={chatId} />\n                </SidebarPage>\n                <SidebarPage open={openGeneral} onClose={this.closeGeneral}>\n                    <General chatId={chatId} />\n                </SidebarPage>\n                <SidebarPage open={openNotifications} onClose={this.closeNotifications}>\n                    <Notifications chatId={chatId} />\n                </SidebarPage>\n                <SidebarPage open={openPrivacySecurity} onClose={this.closePrivacySecurity}>\n                    <PrivacySecurity />\n                </SidebarPage>\n                <SidebarPage open={openLanguage} onClose={this.closeLanguage}>\n                    <Language />\n                </SidebarPage>\n            </>\n        );\n    }\n}\n\nSettings.propTypes = {\n    chatId: PropTypes.number,\n    popup: PropTypes.bool\n};\n\nconst enhance = compose(\n    withSaveRef(),\n    withTranslation(),\n    withRestoreRef()\n);\n\nexport default enhance(Settings);\n"]},"metadata":{},"sourceType":"module"}