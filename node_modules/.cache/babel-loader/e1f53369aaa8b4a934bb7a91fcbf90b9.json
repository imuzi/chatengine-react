{"ast":null,"code":"import _classCallCheck from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/wubenqi/nebula-chat/telegram-react/src/Components/Tile/SharedMedia/ContextMenu.js\";\n\n/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport MenuList from '@material-ui/core/MenuList';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Popover from '@material-ui/core/Popover';\nimport { deleteMessages, forwardMessages, openChat } from '../../../Actions/Client';\nimport MessageStore from '../../../Stores/MessageStore';\nimport './ContextMenu.css';\n\nvar ContextMenu =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ContextMenu, _React$Component);\n\n  function ContextMenu() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ContextMenu);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ContextMenu)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.handleOpenMessage = function (event) {\n      var _this$props = _this.props,\n          chatId = _this$props.chatId,\n          messageId = _this$props.messageId,\n          onClose = _this$props.onClose;\n      onClose(event);\n      openChat(chatId, messageId);\n    };\n\n    _this.handleForward = function (event) {\n      var _this$props2 = _this.props,\n          chatId = _this$props2.chatId,\n          messageId = _this$props2.messageId,\n          onClose = _this$props2.onClose;\n      onClose(event);\n      forwardMessages(chatId, [messageId]);\n    };\n\n    _this.handleDelete = function (event) {\n      var _this$props3 = _this.props,\n          chatId = _this$props3.chatId,\n          messageId = _this$props3.messageId,\n          onClose = _this$props3.onClose;\n      onClose(event);\n      deleteMessages(chatId, [messageId]);\n    };\n\n    return _this;\n  }\n\n  _createClass(ContextMenu, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          t = _this$props4.t,\n          chatId = _this$props4.chatId,\n          messageId = _this$props4.messageId,\n          open = _this$props4.open,\n          onClose = _this$props4.onClose,\n          anchorPosition = _this$props4.anchorPosition,\n          showOpenMessage = _this$props4.showOpenMessage;\n      var message = MessageStore.get(chatId, messageId);\n      if (!message) return null;\n      var can_be_forwarded = message.can_be_forwarded,\n          can_be_deleted_only_for_self = message.can_be_deleted_only_for_self,\n          can_be_deleted_for_all_users = message.can_be_deleted_for_all_users;\n      return React.createElement(Popover, {\n        open: open,\n        onClose: onClose,\n        anchorReference: \"anchorPosition\",\n        anchorPosition: anchorPosition,\n        anchorOrigin: {\n          vertical: 'bottom',\n          horizontal: 'right'\n        },\n        transformOrigin: {\n          vertical: 'top',\n          horizontal: 'left'\n        },\n        onMouseDown: function onMouseDown(e) {\n          return e.stopPropagation();\n        },\n        onClick: function onClick(e) {\n          return e.stopPropagation();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, React.createElement(MenuList, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, showOpenMessage && React.createElement(MenuItem, {\n        onClick: this.handleOpenMessage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, t('GoToMessage')), can_be_forwarded && React.createElement(MenuItem, {\n        onClick: this.handleForward,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, t('Forward')), (can_be_deleted_only_for_self || can_be_deleted_for_all_users) && React.createElement(MenuItem, {\n        onClick: this.handleDelete,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, t('Delete'))));\n    }\n  }]);\n\n  return ContextMenu;\n}(React.Component);\n\nContextMenu.propTypes = {\n  chatId: PropTypes.number.isRequired,\n  messageId: PropTypes.number.isRequired,\n  anchorPosition: PropTypes.object.isRequired,\n  open: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  showOpenMessage: PropTypes.bool\n};\nexport default withTranslation()(ContextMenu);","map":{"version":3,"sources":["/Users/wubenqi/nebula-chat/telegram-react/src/Components/Tile/SharedMedia/ContextMenu.js"],"names":["React","PropTypes","withTranslation","MenuList","MenuItem","Popover","deleteMessages","forwardMessages","openChat","MessageStore","ContextMenu","handleOpenMessage","event","props","chatId","messageId","onClose","handleForward","handleDelete","t","open","anchorPosition","showOpenMessage","message","get","can_be_forwarded","can_be_deleted_only_for_self","can_be_deleted_for_all_users","vertical","horizontal","e","stopPropagation","Component","propTypes","number","isRequired","object","bool","func"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport MenuList from '@material-ui/core/MenuList';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Popover from '@material-ui/core/Popover';\nimport { deleteMessages, forwardMessages, openChat } from '../../../Actions/Client';\nimport MessageStore from '../../../Stores/MessageStore';\nimport './ContextMenu.css';\n\nclass ContextMenu extends React.Component {\n    handleOpenMessage = event => {\n        const { chatId, messageId, onClose } = this.props;\n\n        onClose(event);\n\n        openChat(chatId, messageId);\n    };\n\n    handleForward = event => {\n        const { chatId, messageId, onClose } = this.props;\n\n        onClose(event);\n\n        forwardMessages(chatId, [messageId]);\n    };\n\n    handleDelete = event => {\n        const { chatId, messageId, onClose } = this.props;\n\n        onClose(event);\n\n        deleteMessages(chatId, [messageId]);\n    };\n\n    render() {\n        const { t, chatId, messageId, open, onClose, anchorPosition, showOpenMessage } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const { can_be_forwarded, can_be_deleted_only_for_self, can_be_deleted_for_all_users } = message;\n\n        return (\n            <Popover\n                open={open}\n                onClose={onClose}\n                anchorReference='anchorPosition'\n                anchorPosition={anchorPosition}\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'right'\n                }}\n                transformOrigin={{\n                    vertical: 'top',\n                    horizontal: 'left'\n                }}\n                onMouseDown={e => e.stopPropagation()}\n                onClick={e => e.stopPropagation()}>\n                <MenuList>\n                    {showOpenMessage && <MenuItem onClick={this.handleOpenMessage}>{t('GoToMessage')}</MenuItem>}\n                    {can_be_forwarded && <MenuItem onClick={this.handleForward}>{t('Forward')}</MenuItem>}\n                    {(can_be_deleted_only_for_self || can_be_deleted_for_all_users) && (\n                        <MenuItem onClick={this.handleDelete}>{t('Delete')}</MenuItem>\n                    )}\n                </MenuList>\n            </Popover>\n        );\n    }\n\n}\n\nContextMenu.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    anchorPosition: PropTypes.object.isRequired,\n    open: PropTypes.bool.isRequired,\n    onClose: PropTypes.func.isRequired,\n    showOpenMessage: PropTypes.bool\n};\n\nexport default withTranslation()(ContextMenu);"]},"metadata":{},"sourceType":"module"}