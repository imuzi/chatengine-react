{"ast":null,"code":"import _classCallCheck from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/wubenqi/nebula-chat/telegram-react/src/Components/Message/Forward.js\";\n\n/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withTranslation } from 'react-i18next';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { getForwardTitle, isForwardOriginHidden } from '../../Utils/Message';\nimport { openUser, openChat } from '../../Actions/Client';\nimport './Forward.css';\n\nvar Forward =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Forward, _React$Component);\n\n  function Forward() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Forward);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Forward)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      arrowRef: null\n    };\n\n    _this.handleArrowRef = function (node) {\n      _this.setState({\n        arrowRef: node\n      });\n    };\n\n    _this.openForward = function (event) {\n      event.stopPropagation();\n      var forwardInfo = _this.props.forwardInfo;\n      if (!forwardInfo) return null;\n      var origin = forwardInfo.origin;\n\n      switch (origin['@type']) {\n        case 'messageForwardOriginUser':\n          {\n            var sender_user_id = origin.sender_user_id;\n            openUser(sender_user_id, true);\n            break;\n          }\n\n        case 'messageForwardOriginHiddenUser':\n          {\n            break;\n          }\n\n        case 'messageForwardOriginChannel':\n          {\n            var chat_id = origin.chat_id,\n                message_id = origin.message_id;\n            openChat(chat_id, message_id);\n            break;\n          }\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Forward, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          t = _this$props.t,\n          forwardInfo = _this$props.forwardInfo;\n      var arrowRef = this.state.arrowRef;\n      var title = getForwardTitle(forwardInfo, t);\n      var tooltip = isForwardOriginHidden(forwardInfo) ? React.createElement(React.Fragment, null, t('HidAccount'), React.createElement(\"span\", {\n        className: \"forward-arrow\",\n        ref: this.handleArrowRef,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      })) : '';\n      return React.createElement(\"div\", {\n        className: classNames('message-author', 'forward'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, t('ForwardedMessage')), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, t('From') + ' ', React.createElement(Tooltip, {\n        title: tooltip,\n        classes: {\n          popper: 'forward-arrow-popper',\n          tooltip: 'forward-tooltip'\n        },\n        PopperProps: {\n          popperOptions: {\n            modifiers: {\n              arrow: {\n                enabled: Boolean(arrowRef),\n                element: arrowRef\n              }\n            }\n          }\n        },\n        placement: \"top\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        onClick: this.openForward,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, title))));\n    }\n  }]);\n\n  return Forward;\n}(React.Component);\n\nForward.propTypes = {\n  forwardInfo: PropTypes.object.isRequired\n};\nexport default withTranslation()(Forward);","map":{"version":3,"sources":["/Users/wubenqi/nebula-chat/telegram-react/src/Components/Message/Forward.js"],"names":["React","PropTypes","classNames","withTranslation","Tooltip","getForwardTitle","isForwardOriginHidden","openUser","openChat","Forward","state","arrowRef","handleArrowRef","node","setState","openForward","event","stopPropagation","forwardInfo","props","origin","sender_user_id","chat_id","message_id","t","title","tooltip","popper","popperOptions","modifiers","arrow","enabled","Boolean","element","Component","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withTranslation } from 'react-i18next';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { getForwardTitle, isForwardOriginHidden } from '../../Utils/Message';\nimport { openUser, openChat } from '../../Actions/Client';\nimport './Forward.css';\n\nclass Forward extends React.Component {\n    state = {\n        arrowRef: null\n    };\n\n    handleArrowRef = node => {\n        this.setState({\n            arrowRef: node\n        });\n    };\n\n    openForward = event => {\n        event.stopPropagation();\n\n        const { forwardInfo } = this.props;\n        if (!forwardInfo) return null;\n\n        const { origin } = forwardInfo;\n\n        switch (origin['@type']) {\n            case 'messageForwardOriginUser': {\n                const { sender_user_id } = origin;\n\n                openUser(sender_user_id, true);\n                break;\n            }\n            case 'messageForwardOriginHiddenUser': {\n                break;\n            }\n            case 'messageForwardOriginChannel': {\n                const { chat_id, message_id } = origin;\n\n                openChat(chat_id, message_id);\n                break;\n            }\n        }\n    };\n\n    render() {\n        const { t, forwardInfo } = this.props;\n        const { arrowRef } = this.state;\n\n        const title = getForwardTitle(forwardInfo, t);\n        const tooltip = isForwardOriginHidden(forwardInfo) ? (\n            <>\n                {t('HidAccount')}\n                <span className='forward-arrow' ref={this.handleArrowRef} />\n            </>\n        ) : (\n            ''\n        );\n\n        return (\n            <div className={classNames('message-author', 'forward')}>\n                <div>{t('ForwardedMessage')}</div>\n                <div>\n                    {t('From') + ' '}\n                    <Tooltip\n                        title={tooltip}\n                        classes={{ popper: 'forward-arrow-popper', tooltip: 'forward-tooltip' }}\n                        PopperProps={{\n                            popperOptions: {\n                                modifiers: {\n                                    arrow: {\n                                        enabled: Boolean(arrowRef),\n                                        element: arrowRef\n                                    }\n                                }\n                            }\n                        }}\n                        placement='top'>\n                        <a onClick={this.openForward}>{title}</a>\n                    </Tooltip>\n                </div>\n            </div>\n        );\n    }\n}\n\nForward.propTypes = {\n    forwardInfo: PropTypes.object.isRequired\n};\n\nexport default withTranslation()(Forward);\n"]},"metadata":{},"sourceType":"module"}