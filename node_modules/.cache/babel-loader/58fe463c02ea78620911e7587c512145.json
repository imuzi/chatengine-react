{"ast":null,"code":"import _regeneratorRuntime from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/wubenqi/nebula-chat/telegram-react/src/Components/Tile/SharedMedia/SharedDocument.js\";\n\n/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ContextMenu from './ContextMenu';\nimport { openMedia } from '../../../Utils/Message';\nimport { getMedia } from '../../../Utils/Media';\nimport MessageStore from '../../../Stores/MessageStore';\nimport './SharedDocument.css';\n\nvar SharedDocument =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SharedDocument, _React$Component);\n\n  function SharedDocument() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SharedDocument);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SharedDocument)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      contextMenu: false,\n      left: 0,\n      top: 0\n    };\n\n    _this.handleOpenContextMenu =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var contextMenu, left, top;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (event) {\n                  event.preventDefault();\n                  event.stopPropagation();\n                }\n\n                contextMenu = _this.state.contextMenu;\n\n                if (contextMenu) {\n                  _this.setState({\n                    contextMenu: false\n                  });\n                } else {\n                  left = event.clientX;\n                  top = event.clientY;\n\n                  _this.setState({\n                    contextMenu: true,\n                    left: left,\n                    top: top\n                  });\n                }\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.handleCloseContextMenu = function (event) {\n      if (event) {\n        event.stopPropagation();\n      }\n\n      _this.setState({\n        contextMenu: false\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(SharedDocument, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          chatId = _this$props.chatId,\n          messageId = _this$props.messageId,\n          showOpenMessage = _this$props.showOpenMessage;\n      var _this$state = this.state,\n          contextMenu = _this$state.contextMenu,\n          left = _this$state.left,\n          top = _this$state.top;\n      var message = MessageStore.get(chatId, messageId);\n      if (!message) return null;\n      return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n        className: \"shared-document\",\n        onContextMenu: this.handleOpenContextMenu,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, getMedia(message, function () {\n        return openMedia(chatId, messageId, true);\n      })), React.createElement(ContextMenu, {\n        chatId: chatId,\n        messageId: messageId,\n        anchorPosition: {\n          top: top,\n          left: left\n        },\n        open: contextMenu,\n        showOpenMessage: showOpenMessage,\n        onClose: this.handleCloseContextMenu,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return SharedDocument;\n}(React.Component);\n\nSharedDocument.propTypes = {\n  chatId: PropTypes.number.isRequired,\n  messageId: PropTypes.number.isRequired,\n  showOpenMessage: PropTypes.number.isRequired\n};\nexport default SharedDocument;","map":{"version":3,"sources":["/Users/wubenqi/nebula-chat/telegram-react/src/Components/Tile/SharedMedia/SharedDocument.js"],"names":["React","PropTypes","ContextMenu","openMedia","getMedia","MessageStore","SharedDocument","state","contextMenu","left","top","handleOpenContextMenu","event","preventDefault","stopPropagation","setState","clientX","clientY","handleCloseContextMenu","props","chatId","messageId","showOpenMessage","message","get","Component","propTypes","number","isRequired"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ContextMenu from './ContextMenu';\nimport { openMedia } from '../../../Utils/Message';\nimport { getMedia } from '../../../Utils/Media';\nimport MessageStore from '../../../Stores/MessageStore';\nimport './SharedDocument.css';\n\nclass SharedDocument extends React.Component {\n    state = {\n        contextMenu: false,\n        left: 0,\n        top: 0\n    };\n\n    handleOpenContextMenu = async event => {\n        if (event) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n        const { contextMenu } = this.state;\n\n        if (contextMenu) {\n            this.setState({ contextMenu: false });\n        } else {\n            const left = event.clientX;\n            const top = event.clientY;\n\n            this.setState({\n                contextMenu: true,\n                left,\n                top\n            });\n        }\n    };\n\n    handleCloseContextMenu = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        this.setState({ contextMenu: false });\n    };\n\n    render() {\n        const { chatId, messageId, showOpenMessage } = this.props;\n        const { contextMenu, left, top } = this.state;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        return (\n            <>\n                <div className='shared-document' onContextMenu={this.handleOpenContextMenu}>\n                    {getMedia(message, () => openMedia(chatId, messageId, true))}\n                </div>\n                <ContextMenu\n                    chatId={chatId}\n                    messageId={messageId}\n                    anchorPosition={{ top, left }}\n                    open={contextMenu}\n                    showOpenMessage={showOpenMessage}\n                    onClose={this.handleCloseContextMenu}\n                />\n            </>\n        );\n    }\n}\n\nSharedDocument.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    showOpenMessage: PropTypes.number.isRequired\n};\n\nexport default SharedDocument;\n"]},"metadata":{},"sourceType":"module"}