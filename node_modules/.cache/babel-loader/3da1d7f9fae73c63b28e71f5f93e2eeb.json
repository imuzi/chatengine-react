{"ast":null,"code":"import _regeneratorRuntime from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/wubenqi/nebula-chat/telegram-react/src/Components/ColumnLeft/Settings/PrivacySecurity.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport { compose, withRestoreRef, withSaveRef } from '../../../Utils/HOC';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ActiveSessions from './ActiveSessions';\nimport ArrowBackIcon from '../../../Assets/Icons/Back';\nimport BlockedUsers from './BlockedUsers';\nimport DeviceIcon from '../../../Assets/Icons/Device';\nimport RemoveMemberIcon from '../../../Assets/Icons/RemoveMember';\nimport SidebarPage from '../SidebarPage';\nimport SectionHeader from '../SectionHeader';\nimport UserStore from '../../../Stores/UserStore';\nimport TdLibController from '../../../Controllers/TdLibController';\nimport './PrivacySecurity.css';\n\nvar PrivacySecurity =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(PrivacySecurity, _React$Component);\n\n  function PrivacySecurity() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PrivacySecurity);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PrivacySecurity)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      sessions: null,\n      users: null,\n      openBlockedUsers: false,\n      openActiveSessions: false\n    };\n\n    _this.onUpdateUserFullInfo = function (update) {\n      var user_id = update.user_id,\n          user_full_info = update.user_full_info;\n      var users = _this.state.users;\n      if (!users) return;\n      var total_count = users.total_count,\n          user_ids = users.user_ids;\n      var is_blocked = user_full_info.is_blocked;\n      var prevIsBlocked = user_ids.indexOf(user_id) !== -1;\n      if (is_blocked === prevIsBlocked) return;\n\n      if (is_blocked) {\n        _this.setState({\n          users: _objectSpread({}, users, {\n            total_count: total_count + 1,\n            user_ids: [user_id].concat(_toConsumableArray(user_ids))\n          })\n        });\n      } else {\n        _this.setState({\n          users: _objectSpread({}, users, {\n            total_count: total_count - 1,\n            user_ids: user_ids.filter(function (x) {\n              return x !== user_id;\n            })\n          })\n        });\n      }\n    };\n\n    _this.openActiveSessions = function () {\n      if (!_this.state.sessions) return;\n\n      _this.setState({\n        openActiveSessions: true\n      });\n    };\n\n    _this.closeActiveSessions = function () {\n      _this.setState({\n        openActiveSessions: false\n      });\n    };\n\n    _this.openBlockedUsers = function () {\n      if (!_this.state.users) return;\n\n      _this.setState({\n        openBlockedUsers: true\n      });\n    };\n\n    _this.closeBlockedUsers = function () {\n      _this.setState({\n        openBlockedUsers: false\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(PrivacySecurity, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadContent();\n      UserStore.on('updateUserFullInfo', this.onUpdateUserFullInfo);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      UserStore.off('updateUserFullInfo', this.onUpdateUserFullInfo);\n    }\n  }, {\n    key: \"loadContent\",\n    value: function () {\n      var _loadContent = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                TdLibController.send({\n                  '@type': 'getActiveSessions'\n                }).then(function (sessions) {\n                  return _this2.setState({\n                    sessions: sessions\n                  });\n                });\n                TdLibController.send({\n                  '@type': 'getBlockedUsers',\n                  offset: 0,\n                  limit: 100\n                }).then(function (users) {\n                  return _this2.setState({\n                    users: users\n                  });\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function loadContent() {\n        return _loadContent.apply(this, arguments);\n      }\n\n      return loadContent;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          t = _this$props.t,\n          onClose = _this$props.onClose;\n      var _this$state = this.state,\n          openBlockedUsers = _this$state.openBlockedUsers,\n          users = _this$state.users,\n          openActiveSessions = _this$state.openActiveSessions,\n          sessions = _this$state.sessions;\n      var sessionsCount = sessions && sessions.sessions.length > 0 ? sessions.sessions.length === 1 ? '1 session' : \"\".concat(sessions.sessions.length, \" sessions\") : '1 session';\n      var usersCount = users && users.total_count > 0 ? users.total_count === 1 ? '1 user' : \"\".concat(users.total_count, \" users\") : 'no users';\n      return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n        className: \"header-master\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        className: \"header-left-button\",\n        onClick: onClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(ArrowBackIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"header-status grow cursor-pointer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"header-status-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, t('PrivacySettings')))), React.createElement(\"div\", {\n        className: \"sidebar-page-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sidebar-page-section\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(ListItem, {\n        className: \"settings-list-item2\",\n        role: undefined,\n        button: true,\n        onClick: this.openBlockedUsers,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(ListItemIcon, {\n        className: \"settings-list-item-icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(RemoveMemberIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      })), React.createElement(ListItemText, {\n        id: \"label-2\",\n        className: \"settings-list-item-text\",\n        primary: t('BlockedUsers'),\n        secondary: usersCount,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      })), React.createElement(ListItem, {\n        className: \"settings-list-item2\",\n        role: undefined,\n        button: true,\n        onClick: this.openActiveSessions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(ListItemIcon, {\n        className: \"settings-list-item-icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(DeviceIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      })), React.createElement(ListItemText, {\n        id: \"label-2\",\n        className: \"settings-list-item-text\",\n        primary: t('SessionsTitle'),\n        secondary: sessionsCount,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"sidebar-page-section-divider\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"sidebar-page-section\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(SectionHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, t('PrivacyTitle')), React.createElement(ListItem, {\n        className: \"settings-list-item2\",\n        role: undefined,\n        button: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(ListItemText, {\n        className: \"settings-list-item-text2\",\n        primary: t('PrivacyPhoneTitle'),\n        secondary: t('LastSeenContacts'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      })), React.createElement(ListItem, {\n        className: \"settings-list-item2\",\n        role: undefined,\n        button: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(ListItemText, {\n        className: \"settings-list-item-text2\",\n        primary: t('LastSeenTitle'),\n        secondary: t('LastSeenEverybody'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      })), React.createElement(ListItem, {\n        className: \"settings-list-item2\",\n        role: undefined,\n        button: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(ListItemText, {\n        className: \"settings-list-item-text2\",\n        primary: t('PrivacyProfilePhotoTitle'),\n        secondary: t('LastSeenEverybody'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      })), React.createElement(ListItem, {\n        className: \"settings-list-item2\",\n        role: undefined,\n        button: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(ListItemText, {\n        className: \"settings-list-item-text2\",\n        primary: t('PrivacyForwardsTitle'),\n        secondary: t('LastSeenEverybody'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      })), React.createElement(ListItem, {\n        className: \"settings-list-item2\",\n        role: undefined,\n        button: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(ListItemText, {\n        className: \"settings-list-item-text2\",\n        primary: t('WhoCanAddMe'),\n        secondary: t('LastSeenEverybody'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      })))), React.createElement(SidebarPage, {\n        open: openBlockedUsers,\n        onClose: this.closeBlockedUsers,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(BlockedUsers, {\n        users: users,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      })), React.createElement(SidebarPage, {\n        open: openActiveSessions,\n        onClose: this.closeActiveSessions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(ActiveSessions, {\n        sessions: sessions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return PrivacySecurity;\n}(React.Component);\n\nPrivacySecurity.propTypes = {\n  onClose: PropTypes.func\n};\nvar enhance = compose(withSaveRef(), withTranslation(), withRestoreRef());\nexport default enhance(PrivacySecurity);","map":{"version":3,"sources":["/Users/wubenqi/nebula-chat/telegram-react/src/Components/ColumnLeft/Settings/PrivacySecurity.js"],"names":["React","PropTypes","withTranslation","compose","withRestoreRef","withSaveRef","IconButton","ListItem","ListItemIcon","ListItemText","ActiveSessions","ArrowBackIcon","BlockedUsers","DeviceIcon","RemoveMemberIcon","SidebarPage","SectionHeader","UserStore","TdLibController","PrivacySecurity","state","sessions","users","openBlockedUsers","openActiveSessions","onUpdateUserFullInfo","update","user_id","user_full_info","total_count","user_ids","is_blocked","prevIsBlocked","indexOf","setState","filter","x","closeActiveSessions","closeBlockedUsers","loadContent","on","off","send","then","offset","limit","props","t","onClose","sessionsCount","length","usersCount","undefined","Component","propTypes","func","enhance"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport { compose, withRestoreRef, withSaveRef } from '../../../Utils/HOC';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ActiveSessions from './ActiveSessions';\nimport ArrowBackIcon from '../../../Assets/Icons/Back';\nimport BlockedUsers from './BlockedUsers';\nimport DeviceIcon from '../../../Assets/Icons/Device';\nimport RemoveMemberIcon from '../../../Assets/Icons/RemoveMember';\nimport SidebarPage from '../SidebarPage';\nimport SectionHeader from '../SectionHeader';\nimport UserStore from '../../../Stores/UserStore';\nimport TdLibController from '../../../Controllers/TdLibController';\nimport './PrivacySecurity.css';\n\nclass PrivacySecurity extends React.Component {\n    state = {\n        sessions: null,\n        users: null,\n        openBlockedUsers: false,\n        openActiveSessions: false\n    };\n\n    componentDidMount() {\n        this.loadContent();\n\n        UserStore.on('updateUserFullInfo', this.onUpdateUserFullInfo);\n    }\n\n    componentWillUnmount() {\n        UserStore.off('updateUserFullInfo', this.onUpdateUserFullInfo);\n    }\n\n    onUpdateUserFullInfo = update => {\n        const { user_id, user_full_info } = update;\n        const { users } = this.state;\n        if (!users) return;\n\n        const { total_count, user_ids } = users;\n        const { is_blocked } = user_full_info;\n        const prevIsBlocked = user_ids.indexOf(user_id) !== -1;\n        if (is_blocked === prevIsBlocked) return;\n\n        if (is_blocked) {\n            this.setState({\n                users: {\n                    ...users,\n                    total_count: total_count + 1,\n                    user_ids: [user_id, ...user_ids]\n                }\n            });\n        } else {\n            this.setState({\n                users: {\n                    ...users,\n                    total_count: total_count - 1,\n                    user_ids: user_ids.filter(x => x !== user_id)\n                }\n            });\n        }\n    };\n\n    async loadContent() {\n        TdLibController.send({\n            '@type': 'getActiveSessions'\n        }).then(sessions => this.setState({ sessions }));\n\n        TdLibController.send({\n            '@type': 'getBlockedUsers',\n            offset: 0,\n            limit: 100\n        }).then(users => this.setState({ users }));\n    }\n\n    openActiveSessions = () => {\n        if (!this.state.sessions) return;\n\n        this.setState({\n            openActiveSessions: true\n        });\n    };\n\n    closeActiveSessions = () => {\n        this.setState({\n            openActiveSessions: false\n        });\n    };\n\n    openBlockedUsers = () => {\n        if (!this.state.users) return;\n\n        this.setState({\n            openBlockedUsers: true\n        });\n    };\n\n    closeBlockedUsers = () => {\n        this.setState({\n            openBlockedUsers: false\n        });\n    };\n\n    render() {\n        const { t, onClose } = this.props;\n        const { openBlockedUsers, users, openActiveSessions, sessions } = this.state;\n\n        const sessionsCount =\n            sessions && sessions.sessions.length > 0\n                ? sessions.sessions.length === 1\n                    ? '1 session'\n                    : `${sessions.sessions.length} sessions`\n                : '1 session';\n\n        const usersCount =\n            users && users.total_count > 0\n                ? users.total_count === 1\n                    ? '1 user'\n                    : `${users.total_count} users`\n                : 'no users';\n\n        return (\n            <>\n                <div className='header-master'>\n                    <IconButton className='header-left-button' onClick={onClose}>\n                        <ArrowBackIcon />\n                    </IconButton>\n                    <div className='header-status grow cursor-pointer'>\n                        <span className='header-status-content'>{t('PrivacySettings')}</span>\n                    </div>\n                </div>\n                <div className='sidebar-page-content'>\n                    <div className='sidebar-page-section'>\n                        <ListItem\n                            className='settings-list-item2'\n                            role={undefined}\n                            button\n                            onClick={this.openBlockedUsers}>\n                            <ListItemIcon className='settings-list-item-icon'>\n                                <RemoveMemberIcon />\n                            </ListItemIcon>\n                            <ListItemText\n                                id='label-2'\n                                className='settings-list-item-text'\n                                primary={t('BlockedUsers')}\n                                secondary={usersCount}\n                            />\n                        </ListItem>\n                        <ListItem\n                            className='settings-list-item2'\n                            role={undefined}\n                            button\n                            onClick={this.openActiveSessions}>\n                            <ListItemIcon className='settings-list-item-icon'>\n                                <DeviceIcon />\n                            </ListItemIcon>\n                            <ListItemText\n                                id='label-2'\n                                className='settings-list-item-text'\n                                primary={t('SessionsTitle')}\n                                secondary={sessionsCount}\n                            />\n                        </ListItem>\n                    </div>\n                    <div className='sidebar-page-section-divider' />\n                    <div className='sidebar-page-section'>\n                        <SectionHeader>{t('PrivacyTitle')}</SectionHeader>\n                        <ListItem className='settings-list-item2' role={undefined} button>\n                            <ListItemText\n                                className='settings-list-item-text2'\n                                primary={t('PrivacyPhoneTitle')}\n                                secondary={t('LastSeenContacts')}\n                            />\n                        </ListItem>\n                        <ListItem className='settings-list-item2' role={undefined} button>\n                            <ListItemText\n                                className='settings-list-item-text2'\n                                primary={t('LastSeenTitle')}\n                                secondary={t('LastSeenEverybody')}\n                            />\n                        </ListItem>\n                        <ListItem className='settings-list-item2' role={undefined} button>\n                            <ListItemText\n                                className='settings-list-item-text2'\n                                primary={t('PrivacyProfilePhotoTitle')}\n                                secondary={t('LastSeenEverybody')}\n                            />\n                        </ListItem>\n                        <ListItem className='settings-list-item2' role={undefined} button>\n                            <ListItemText\n                                className='settings-list-item-text2'\n                                primary={t('PrivacyForwardsTitle')}\n                                secondary={t('LastSeenEverybody')}\n                            />\n                        </ListItem>\n                        <ListItem className='settings-list-item2' role={undefined} button>\n                            <ListItemText\n                                className='settings-list-item-text2'\n                                primary={t('WhoCanAddMe')}\n                                secondary={t('LastSeenEverybody')}\n                            />\n                        </ListItem>\n                    </div>\n                </div>\n                <SidebarPage open={openBlockedUsers} onClose={this.closeBlockedUsers}>\n                    <BlockedUsers users={users} />\n                </SidebarPage>\n                <SidebarPage open={openActiveSessions} onClose={this.closeActiveSessions}>\n                    <ActiveSessions sessions={sessions} />\n                </SidebarPage>\n            </>\n        );\n    }\n}\n\nPrivacySecurity.propTypes = {\n    onClose: PropTypes.func\n};\n\nconst enhance = compose(\n    withSaveRef(),\n    withTranslation(),\n    withRestoreRef()\n);\n\nexport default enhance(PrivacySecurity);\n"]},"metadata":{},"sourceType":"module"}