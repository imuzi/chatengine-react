{"ast":null,"code":"import _classCallCheck from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\n/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar Animator =\n/*#__PURE__*/\nfunction () {\n  function Animator(_duration) {\n    var _this = this;\n\n    var _options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n    _classCallCheck(this, Animator);\n\n    this.start = function () {\n      _this.stopped = false;\n      _this.id = requestAnimationFrame(_this.startAnim);\n    };\n\n    this.startAnim = function (timeStamp) {\n      var start = _this.start,\n          duration = _this.duration;\n      _this.start = timeStamp;\n      _this.end = start + duration;\n\n      _this.draw(timeStamp);\n    };\n\n    this.draw = function (now) {\n      var stopped = _this.stopped,\n          duration = _this.duration,\n          start = _this.start,\n          options = _this.options;\n\n      if (now - start > duration && options.every(function (x) {\n        return x.to === x.last;\n      })) {\n        _this.stopped = true;\n      }\n\n      if (stopped) return;\n      var time = Math.min(now - start, duration);\n      var p = duration === 0 ? 1.0 : time / duration;\n      var val = Animator.outSine(p);\n      options.forEach(function (x) {\n        var from = x.from,\n            to = x.to,\n            func = x.func;\n        x.last = from + (to - from) * val;\n        func(x.last);\n      });\n      _this.id = requestAnimationFrame(_this.draw);\n    };\n\n    this.stop = function () {\n      _this.stopped = true;\n      cancelAnimationFrame(_this.id);\n    };\n\n    this.options = _options;\n    this.duration = _duration;\n  }\n\n  _createClass(Animator, null, [{\n    key: \"outSine\",\n    value: function outSine(n) {\n      return Math.sin(n * Math.PI / 2);\n    }\n  }]);\n\n  return Animator;\n}();\n\nexport default Animator;","map":{"version":3,"sources":["/Users/wubenqi/nebula-chat/telegram-react/src/Utils/Animatior.js"],"names":["Animator","duration","options","start","stopped","id","requestAnimationFrame","startAnim","timeStamp","end","draw","now","every","x","to","last","time","Math","min","p","val","outSine","forEach","from","func","stop","cancelAnimationFrame","n","sin","PI"],"mappings":";;;AAAA;;;;;;IAOMA,Q;;;AACF,oBAAYC,SAAZ,EAAoC;AAAA;;AAAA,QAAdC,QAAc,uEAAJ,EAAI;;AAAA;;AAAA,SASpCC,KAToC,GAS5B,YAAM;AACV,MAAA,KAAI,CAACC,OAAL,GAAe,KAAf;AACA,MAAA,KAAI,CAACC,EAAL,GAAUC,qBAAqB,CAAC,KAAI,CAACC,SAAN,CAA/B;AACH,KAZmC;;AAAA,SAcpCA,SAdoC,GAcxB,UAAAC,SAAS,EAAI;AAAA,UACbL,KADa,GACO,KADP,CACbA,KADa;AAAA,UACNF,QADM,GACO,KADP,CACNA,QADM;AAGrB,MAAA,KAAI,CAACE,KAAL,GAAaK,SAAb;AACA,MAAA,KAAI,CAACC,GAAL,GAAWN,KAAK,GAAGF,QAAnB;;AACA,MAAA,KAAI,CAACS,IAAL,CAAUF,SAAV;AACH,KApBmC;;AAAA,SAsBpCE,IAtBoC,GAsB7B,UAAAC,GAAG,EAAI;AAAA,UACFP,OADE,GACoC,KADpC,CACFA,OADE;AAAA,UACOH,QADP,GACoC,KADpC,CACOA,QADP;AAAA,UACiBE,KADjB,GACoC,KADpC,CACiBA,KADjB;AAAA,UACwBD,OADxB,GACoC,KADpC,CACwBA,OADxB;;AAGV,UAAIS,GAAG,GAAGR,KAAN,GAAcF,QAAd,IAA0BC,OAAO,CAACU,KAAR,CAAc,UAAAC,CAAC;AAAA,eAAIA,CAAC,CAACC,EAAF,KAASD,CAAC,CAACE,IAAf;AAAA,OAAf,CAA9B,EAAmE;AAC/D,QAAA,KAAI,CAACX,OAAL,GAAe,IAAf;AACH;;AAED,UAAIA,OAAJ,EAAa;AAEb,UAAMY,IAAI,GAAGC,IAAI,CAACC,GAAL,CAASP,GAAG,GAAGR,KAAf,EAAsBF,QAAtB,CAAb;AACA,UAAMkB,CAAC,GAAGlB,QAAQ,KAAK,CAAb,GAAiB,GAAjB,GAAuBe,IAAI,GAAGf,QAAxC;AACA,UAAMmB,GAAG,GAAGpB,QAAQ,CAACqB,OAAT,CAAiBF,CAAjB,CAAZ;AAEAjB,MAAAA,OAAO,CAACoB,OAAR,CAAgB,UAAAT,CAAC,EAAI;AAAA,YACTU,IADS,GACUV,CADV,CACTU,IADS;AAAA,YACHT,EADG,GACUD,CADV,CACHC,EADG;AAAA,YACCU,IADD,GACUX,CADV,CACCW,IADD;AAEjBX,QAAAA,CAAC,CAACE,IAAF,GAASQ,IAAI,GAAG,CAACT,EAAE,GAAGS,IAAN,IAAcH,GAA9B;AACAI,QAAAA,IAAI,CAACX,CAAC,CAACE,IAAH,CAAJ;AACH,OAJD;AAMA,MAAA,KAAI,CAACV,EAAL,GAAUC,qBAAqB,CAAC,KAAI,CAACI,IAAN,CAA/B;AACH,KA1CmC;;AAAA,SA4CpCe,IA5CoC,GA4C7B,YAAM;AACT,MAAA,KAAI,CAACrB,OAAL,GAAe,IAAf;AACAsB,MAAAA,oBAAoB,CAAC,KAAI,CAACrB,EAAN,CAApB;AACH,KA/CmC;;AAChC,SAAKH,OAAL,GAAeA,QAAf;AACA,SAAKD,QAAL,GAAgBA,SAAhB;AACH;;;;4BAEc0B,C,EAAG;AACd,aAAOV,IAAI,CAACW,GAAL,CAAUD,CAAC,GAAGV,IAAI,CAACY,EAAV,GAAgB,CAAzB,CAAP;AACH;;;;;;AA2CL,eAAe7B,QAAf","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nclass Animator {\n    constructor(duration, options = []) {\n        this.options = options;\n        this.duration = duration;\n    }\n\n    static outSine(n) {\n        return Math.sin((n * Math.PI) / 2);\n    }\n\n    start = () => {\n        this.stopped = false;\n        this.id = requestAnimationFrame(this.startAnim);\n    };\n\n    startAnim = timeStamp => {\n        const { start, duration } = this;\n\n        this.start = timeStamp;\n        this.end = start + duration;\n        this.draw(timeStamp);\n    };\n\n    draw = now => {\n        const { stopped, duration, start, options } = this;\n\n        if (now - start > duration && options.every(x => x.to === x.last)) {\n            this.stopped = true;\n        }\n\n        if (stopped) return;\n\n        const time = Math.min(now - start, duration);\n        const p = duration === 0 ? 1.0 : time / duration;\n        const val = Animator.outSine(p);\n\n        options.forEach(x => {\n            const { from, to, func } = x;\n            x.last = from + (to - from) * val;\n            func(x.last);\n        });\n\n        this.id = requestAnimationFrame(this.draw);\n    };\n\n    stop = () => {\n        this.stopped = true;\n        cancelAnimationFrame(this.id);\n    };\n}\n\nexport default Animator;\n"]},"metadata":{},"sourceType":"module"}