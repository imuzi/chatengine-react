{"ast":null,"code":"/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nexport function findLastTextNode(element) {\n  if (element.nodeType === Node.TEXT_NODE) {\n    return element;\n  }\n\n  for (var i = element.childNodes.length - 1; i >= 0; i--) {\n    var textNode = findLastTextNode(element.childNodes[i]);\n\n    if (textNode) {\n      return textNode;\n    }\n  }\n\n  return null;\n}\nexport function focusInput(element) {\n  if (!element) return;\n  var textNode = findLastTextNode(element);\n\n  if (textNode) {\n    var range = document.createRange();\n    range.setStart(textNode, textNode.length);\n    range.collapse(true);\n    var selection = window.getSelection();\n    selection.removeAllRanges();\n    selection.addRange(range);\n  }\n\n  element.focus();\n}\nexport function scrollTop(element) {\n  var behavior = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'smooth';\n  if (!element) return;\n  element.scrollTop = Math.min(element.scrollTop, 100);\n  setTimeout(function () {\n    element.scrollTo({\n      top: 0,\n      behavior: behavior\n    });\n  }, 50);\n}","map":{"version":3,"sources":["/Users/wubenqi/nebula-chat/telegram-react/src/Utils/DOM.js"],"names":["findLastTextNode","element","nodeType","Node","TEXT_NODE","i","childNodes","length","textNode","focusInput","range","document","createRange","setStart","collapse","selection","window","getSelection","removeAllRanges","addRange","focus","scrollTop","behavior","Math","min","setTimeout","scrollTo","top"],"mappings":"AAAA;;;;;;AAOA,OAAO,SAASA,gBAAT,CAA0BC,OAA1B,EAAmC;AACtC,MAAIA,OAAO,CAACC,QAAR,KAAqBC,IAAI,CAACC,SAA9B,EAAyC;AACrC,WAAOH,OAAP;AACH;;AAED,OAAK,IAAII,CAAC,GAAGJ,OAAO,CAACK,UAAR,CAAmBC,MAAnB,GAA4B,CAAzC,EAA4CF,CAAC,IAAI,CAAjD,EAAoDA,CAAC,EAArD,EAAyD;AACrD,QAAMG,QAAQ,GAAGR,gBAAgB,CAACC,OAAO,CAACK,UAAR,CAAmBD,CAAnB,CAAD,CAAjC;;AACA,QAAIG,QAAJ,EAAc;AACV,aAAOA,QAAP;AACH;AACJ;;AAED,SAAO,IAAP;AACH;AAED,OAAO,SAASC,UAAT,CAAoBR,OAApB,EAA6B;AAChC,MAAI,CAACA,OAAL,EAAc;AAEd,MAAMO,QAAQ,GAAGR,gBAAgB,CAACC,OAAD,CAAjC;;AACA,MAAIO,QAAJ,EAAc;AACV,QAAME,KAAK,GAAGC,QAAQ,CAACC,WAAT,EAAd;AACAF,IAAAA,KAAK,CAACG,QAAN,CAAeL,QAAf,EAAyBA,QAAQ,CAACD,MAAlC;AACAG,IAAAA,KAAK,CAACI,QAAN,CAAe,IAAf;AAEA,QAAMC,SAAS,GAAGC,MAAM,CAACC,YAAP,EAAlB;AACAF,IAAAA,SAAS,CAACG,eAAV;AACAH,IAAAA,SAAS,CAACI,QAAV,CAAmBT,KAAnB;AACH;;AAEDT,EAAAA,OAAO,CAACmB,KAAR;AACH;AAED,OAAO,SAASC,SAAT,CAAmBpB,OAAnB,EAAiD;AAAA,MAArBqB,QAAqB,uEAAV,QAAU;AACpD,MAAI,CAACrB,OAAL,EAAc;AAEdA,EAAAA,OAAO,CAACoB,SAAR,GAAoBE,IAAI,CAACC,GAAL,CAASvB,OAAO,CAACoB,SAAjB,EAA4B,GAA5B,CAApB;AACAI,EAAAA,UAAU,CAAC,YAAM;AACbxB,IAAAA,OAAO,CAACyB,QAAR,CAAiB;AACbC,MAAAA,GAAG,EAAE,CADQ;AAEbL,MAAAA,QAAQ,EAARA;AAFa,KAAjB;AAIH,GALS,EAKP,EALO,CAAV;AAMH","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nexport function findLastTextNode(element) {\n    if (element.nodeType === Node.TEXT_NODE) {\n        return element;\n    }\n\n    for (let i = element.childNodes.length - 1; i >= 0; i--) {\n        const textNode = findLastTextNode(element.childNodes[i]);\n        if (textNode) {\n            return textNode;\n        }\n    }\n\n    return null;\n}\n\nexport function focusInput(element) {\n    if (!element) return;\n\n    const textNode = findLastTextNode(element);\n    if (textNode) {\n        const range = document.createRange();\n        range.setStart(textNode, textNode.length);\n        range.collapse(true);\n\n        const selection = window.getSelection();\n        selection.removeAllRanges();\n        selection.addRange(range);\n    }\n\n    element.focus();\n}\n\nexport function scrollTop(element, behavior = 'smooth') {\n    if (!element) return;\n\n    element.scrollTop = Math.min(element.scrollTop, 100);\n    setTimeout(() => {\n        element.scrollTo({\n            top: 0,\n            behavior\n        });\n    }, 50);\n}\n"]},"metadata":{},"sourceType":"module"}