{"ast":null,"code":"import _classCallCheck from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/wubenqi/nebula-chat/telegram-react/src/Components/ColumnMiddle/HeaderCommand.js\";\n\n/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Button from '@material-ui/core/Button';\nimport { clearSelection, deleteMessages, forwardMessages } from '../../Actions/Client';\nimport MessageStore from '../../Stores/MessageStore';\nimport './HeaderCommand.css';\n\nvar HeaderCommand =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(HeaderCommand, _React$Component);\n\n  function HeaderCommand() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, HeaderCommand);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(HeaderCommand)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.handleCancel = function () {\n      clearSelection();\n    };\n\n    _this.handleDelete = function () {\n      var id = 0;\n      var messageIds = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = MessageStore.selectedItems.values()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _ref2 = _step.value;\n          var chatId = _ref2.chatId;\n          var messageId = _ref2.messageId;\n          id = chatId;\n          messageIds.push(messageId);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      deleteMessages(id, messageIds);\n    };\n\n    _this.handleForward = function () {\n      var id;\n      var messageIds = [];\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = MessageStore.selectedItems.values()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var _ref4 = _step2.value;\n          var chatId = _ref4.chatId;\n          var messageId = _ref4.messageId;\n          id = chatId;\n          messageIds.push(messageId);\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      forwardMessages(id, messageIds);\n    };\n\n    return _this;\n  }\n\n  _createClass(HeaderCommand, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          t = _this$props.t,\n          count = _this$props.count;\n      var canBeDeleted = true;\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = MessageStore.selectedItems.values()[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var _ref7 = _step3.value;\n          var chatId = _ref7.chatId;\n          var messageId = _ref7.messageId;\n          var message = MessageStore.get(chatId, messageId);\n\n          if (!message) {\n            canBeDeleted = false;\n            break;\n          }\n\n          if (!message.can_be_deleted_only_for_self && !message.can_be_deleted_for_all_users) {\n            canBeDeleted = false;\n            break;\n          }\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n\n      var canBeForwarded = true;\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = MessageStore.selectedItems.values()[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var _ref8 = _step4.value;\n          var _chatId = _ref8.chatId;\n          var _messageId = _ref8.messageId;\n\n          var _message = MessageStore.get(_chatId, _messageId);\n\n          if (!_message) {\n            canBeForwarded = false;\n            break;\n          }\n\n          if (!_message.can_be_forwarded) {\n            canBeForwarded = false;\n            break;\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      return React.createElement(\"div\", {\n        className: \"header-command\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, canBeForwarded && React.createElement(Button, {\n        color: \"primary\",\n        className: \"header-command-button\",\n        onClick: this.handleForward,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, count <= 1 ? t('Forward') : \"\".concat(t('Forward'), \" \").concat(count)), canBeDeleted && React.createElement(Button, {\n        color: \"primary\",\n        className: \"header-command-button\",\n        onClick: this.handleDelete,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, count <= 1 ? t('Delete') : \"\".concat(t('Delete'), \" \").concat(count)), React.createElement(\"div\", {\n        className: \"header-command-space\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }), React.createElement(Button, {\n        color: \"primary\",\n        className: \"header-command-button\",\n        onClick: this.handleCancel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, t('Cancel')));\n    }\n  }]);\n\n  return HeaderCommand;\n}(React.Component);\n\nHeaderCommand.propTypes = {\n  count: PropTypes.number\n};\nexport default withTranslation()(HeaderCommand);","map":{"version":3,"sources":["/Users/wubenqi/nebula-chat/telegram-react/src/Components/ColumnMiddle/HeaderCommand.js"],"names":["React","PropTypes","withTranslation","Button","clearSelection","deleteMessages","forwardMessages","MessageStore","HeaderCommand","handleCancel","handleDelete","id","messageIds","selectedItems","values","chatId","messageId","push","handleForward","props","t","count","canBeDeleted","message","get","can_be_deleted_only_for_self","can_be_deleted_for_all_users","canBeForwarded","can_be_forwarded","Component","propTypes","number"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Button from '@material-ui/core/Button';\nimport { clearSelection, deleteMessages, forwardMessages } from '../../Actions/Client';\nimport MessageStore from '../../Stores/MessageStore';\nimport './HeaderCommand.css';\n\nclass HeaderCommand extends React.Component {\n    handleCancel = () => {\n        clearSelection();\n    };\n\n    handleDelete = () => {\n        let id = 0;\n        let messageIds = [];\n        for (let { chatId, messageId } of MessageStore.selectedItems.values()) {\n            id = chatId;\n            messageIds.push(messageId);\n        }\n\n        deleteMessages(id, messageIds);\n    };\n\n    handleForward = () => {\n        let id;\n        const messageIds = [];\n        for (let { chatId, messageId } of MessageStore.selectedItems.values()) {\n            id = chatId;\n            messageIds.push(messageId);\n        }\n\n        forwardMessages(id, messageIds);\n    };\n\n    render() {\n        const { t, count } = this.props;\n\n        let canBeDeleted = true;\n        for (let { chatId, messageId } of MessageStore.selectedItems.values()) {\n            const message = MessageStore.get(chatId, messageId);\n            if (!message) {\n                canBeDeleted = false;\n                break;\n            }\n            if (!message.can_be_deleted_only_for_self && !message.can_be_deleted_for_all_users) {\n                canBeDeleted = false;\n                break;\n            }\n        }\n\n        let canBeForwarded = true;\n        for (let { chatId, messageId } of MessageStore.selectedItems.values()) {\n            const message = MessageStore.get(chatId, messageId);\n            if (!message) {\n                canBeForwarded = false;\n                break;\n            }\n            if (!message.can_be_forwarded) {\n                canBeForwarded = false;\n                break;\n            }\n        }\n\n        return (\n            <div className='header-command'>\n                {canBeForwarded && (\n                    <Button color='primary' className='header-command-button' onClick={this.handleForward}>\n                        {count <= 1 ? t('Forward') : `${t('Forward')} ${count}`}\n                    </Button>\n                )}\n                {canBeDeleted && (\n                    <Button color='primary' className='header-command-button' onClick={this.handleDelete}>\n                        {count <= 1 ? t('Delete') : `${t('Delete')} ${count}`}\n                    </Button>\n                )}\n                <div className='header-command-space' />\n                <Button color='primary' className='header-command-button' onClick={this.handleCancel}>\n                    {t('Cancel')}\n                </Button>\n            </div>\n        );\n    }\n}\n\nHeaderCommand.propTypes = {\n    count: PropTypes.number\n};\n\nexport default withTranslation()(HeaderCommand);\n"]},"metadata":{},"sourceType":"module"}