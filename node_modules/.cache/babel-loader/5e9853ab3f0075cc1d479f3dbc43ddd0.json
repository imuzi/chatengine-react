{"ast":null,"code":"import _regeneratorRuntime from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wubenqi/nebula-chat/telegram-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/wubenqi/nebula-chat/telegram-react/src/Components/ColumnLeft/MainMenuButton.js\";\n\n/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport ArrowBackIcon from '../../Assets/Icons/Back';\nimport CloseIcon from '../../Assets/Icons/Close';\nimport ArchiveIcon from '../../Assets/Icons/Archive';\nimport SearchIcon from '../../Assets/Icons/Search';\nimport MenuIcon from '../../Assets/Icons/Menu';\nimport GroupIcon from '../../Assets/Icons/Group';\nimport HelpIcon from '../../Assets/Icons/Help';\nimport SavedIcon from '../../Assets/Icons/Saved';\nimport SettingsIcon from '../../Assets/Icons/Settings';\nimport UserIcon from '../../Assets/Icons/User';\nimport { isAuthorizationReady } from '../../Utils/Common';\nimport { openArchive, openChat, searchChat } from '../../Actions/Client';\nimport AppStore from '../../Stores/ApplicationStore';\nimport UserStore from '../../Stores/UserStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './MainMenuButton.css';\n\nvar MainMenuButton =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MainMenuButton, _React$Component);\n\n  function MainMenuButton(props) {\n    var _this;\n\n    _classCallCheck(this, MainMenuButton);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MainMenuButton).call(this, props));\n\n    _this.onClientUpdatePageWidth = function (update) {\n      var isSmallWidth = update.isSmallWidth;\n\n      _this.setState({\n        isSmallWidth: isSmallWidth\n      });\n    };\n\n    _this.onUpdateAuthorizationState = function (update) {\n      _this.setState({\n        authorizationState: update.authorization_state\n      });\n    };\n\n    _this.handleMenuOpen = function (event) {\n      var authorizationState = _this.state.authorizationState;\n      if (!isAuthorizationReady(authorizationState)) return;\n\n      _this.setState({\n        anchorEl: event.currentTarget\n      });\n    };\n\n    _this.handleMenuClose = function () {\n      _this.setState({\n        anchorEl: null\n      });\n    };\n\n    _this.handleCheckUpdates =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this.handleMenuClose(); //await update();\n\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.handleNewGroup = function (event) {\n      _this.handleMenuClose();\n    };\n\n    _this.handleContacts = function (event) {\n      _this.handleMenuClose();\n\n      TdLibController.clientUpdate({\n        '@type': 'clientUpdateContacts',\n        open: true\n      });\n    };\n\n    _this.handleArchived = function (event) {\n      _this.handleMenuClose();\n\n      openArchive();\n    };\n\n    _this.handleSaved =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(event) {\n        var chat;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _this.handleMenuClose();\n\n                _context2.next = 3;\n                return TdLibController.send({\n                  '@type': 'createPrivateChat',\n                  user_id: UserStore.getMyId(),\n                  force: true\n                });\n\n              case 3:\n                chat = _context2.sent;\n\n                if (chat) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 6:\n                openChat(chat.id);\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.handleSettings =\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(event) {\n        var chat;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _this.handleMenuClose();\n\n                _context3.next = 3;\n                return TdLibController.send({\n                  '@type': 'createPrivateChat',\n                  user_id: UserStore.getMyId(),\n                  force: true\n                });\n\n              case 3:\n                chat = _context3.sent;\n\n                if (chat) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\");\n\n              case 6:\n                TdLibController.clientUpdate({\n                  '@type': 'clientUpdateSettings',\n                  open: true,\n                  chatId: chat.id\n                });\n\n              case 7:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    _this.handleHelp = function (event) {\n      _this.handleMenuClose();\n    };\n\n    _this.handleSearch = function () {\n      _this.handleMenuClose();\n\n      searchChat(0);\n    };\n\n    _this.state = {\n      authorizationState: AppStore.getAuthorizationState(),\n      anchorEl: null,\n      isSmallWidth: AppStore.isSmallWidth\n    };\n    return _this;\n  }\n\n  _createClass(MainMenuButton, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      AppStore.on('updateAuthorizationState', this.onUpdateAuthorizationState);\n      AppStore.on('clientUpdatePageWidth', this.onClientUpdatePageWidth);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      AppStore.off('updateAuthorizationState', this.onUpdateAuthorizationState);\n      AppStore.off('clientUpdatePageWidth', this.onClientUpdatePageWidth);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          t = _this$props.t,\n          timeout = _this$props.timeout,\n          popup = _this$props.popup,\n          showClose = _this$props.showClose,\n          onClose = _this$props.onClose;\n      var _this$state = this.state,\n          anchorEl = _this$state.anchorEl,\n          authorizationState = _this$state.authorizationState,\n          isSmallWidth = _this$state.isSmallWidth;\n      var mainMenuControl = !showClose && isAuthorizationReady(authorizationState) ? React.createElement(Menu, {\n        id: \"main-menu\",\n        anchorEl: anchorEl,\n        open: Boolean(anchorEl),\n        onClose: this.handleMenuClose,\n        getContentAnchorEl: null,\n        disableAutoFocusItem: true,\n        disableRestoreFocus: true,\n        anchorOrigin: {\n          vertical: 'bottom',\n          horizontal: 'left'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(MenuItem, {\n        onClick: this.handleNewGroup,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(ListItemIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(GroupIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      })), React.createElement(ListItemText, {\n        primary: t('NewGroup'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      })), isSmallWidth && React.createElement(MenuItem, {\n        onClick: this.handleSearch,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(ListItemIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(SearchIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      })), React.createElement(ListItemText, {\n        primary: t('Search'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      })), React.createElement(MenuItem, {\n        onClick: this.handleContacts,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(ListItemIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(UserIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      })), React.createElement(ListItemText, {\n        primary: t('Contacts'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      })), React.createElement(MenuItem, {\n        onClick: this.handleArchived,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(ListItemIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(ArchiveIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      })), React.createElement(ListItemText, {\n        primary: t('Archived'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      })), React.createElement(MenuItem, {\n        onClick: this.handleSaved,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(ListItemIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(SavedIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      })), React.createElement(ListItemText, {\n        primary: t('Saved'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      })), React.createElement(MenuItem, {\n        onClick: this.handleSettings,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(ListItemIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(SettingsIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      })), React.createElement(ListItemText, {\n        primary: t('Settings'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      })), React.createElement(MenuItem, {\n        onClick: this.handleHelp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(ListItemIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(HelpIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      })), React.createElement(ListItemText, {\n        primary: t('SettingsHelp'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }))) : null;\n      var closeIcon = popup ? React.createElement(CloseIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }) : React.createElement(ArrowBackIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      });\n      return React.createElement(React.Fragment, null, React.createElement(IconButton, {\n        \"aria-owns\": anchorEl ? 'simple-menu' : null,\n        \"aria-haspopup\": \"true\",\n        className: \"header-left-button main-menu-button\",\n        \"aria-label\": \"Menu\",\n        onClick: showClose ? onClose : this.handleMenuOpen,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, timeout ? React.createElement(SpeedDialIcon, {\n        open: showClose,\n        openIcon: React.createElement(ArrowBackIcon, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218\n          },\n          __self: this\n        }),\n        icon: React.createElement(MenuIcon, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }) : React.createElement(React.Fragment, null, showClose ? closeIcon : React.createElement(MenuIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }))), mainMenuControl);\n    }\n  }]);\n\n  return MainMenuButton;\n}(React.Component);\n\nexport default withTranslation()(MainMenuButton);","map":{"version":3,"sources":["/Users/wubenqi/nebula-chat/telegram-react/src/Components/ColumnLeft/MainMenuButton.js"],"names":["React","withTranslation","IconButton","ListItemIcon","ListItemText","Menu","MenuItem","SpeedDialIcon","ArrowBackIcon","CloseIcon","ArchiveIcon","SearchIcon","MenuIcon","GroupIcon","HelpIcon","SavedIcon","SettingsIcon","UserIcon","isAuthorizationReady","openArchive","openChat","searchChat","AppStore","UserStore","TdLibController","MainMenuButton","props","onClientUpdatePageWidth","update","isSmallWidth","setState","onUpdateAuthorizationState","authorizationState","authorization_state","handleMenuOpen","event","state","anchorEl","currentTarget","handleMenuClose","handleCheckUpdates","handleNewGroup","handleContacts","clientUpdate","open","handleArchived","handleSaved","send","user_id","getMyId","force","chat","id","handleSettings","chatId","handleHelp","handleSearch","getAuthorizationState","on","off","t","timeout","popup","showClose","onClose","mainMenuControl","Boolean","vertical","horizontal","closeIcon","Component"],"mappings":";;;;;;;;;AAAA;;;;;;AAOA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,eAAT,QAAgC,eAAhC;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,YAAP,MAAyB,gCAAzB;AACA,OAAOC,YAAP,MAAyB,gCAAzB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,aAAP,MAA0B,gCAA1B;AACA,OAAOC,aAAP,MAA0B,yBAA1B;AACA,OAAOC,SAAP,MAAsB,0BAAtB;AACA,OAAOC,WAAP,MAAwB,4BAAxB;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,SAAP,MAAsB,0BAAtB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,SAAP,MAAsB,0BAAtB;AACA,OAAOC,YAAP,MAAyB,6BAAzB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,SAASC,oBAAT,QAAqC,oBAArC;AACA,SAASC,WAAT,EAAsBC,QAAtB,EAAgCC,UAAhC,QAAkD,sBAAlD;AACA,OAAOC,QAAP,MAAqB,+BAArB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,eAAP,MAA4B,mCAA5B;AACA,OAAO,sBAAP;;IAEMC,c;;;;;AACF,0BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,wFAAMA,KAAN;;AADe,UAoBnBC,uBApBmB,GAoBO,UAAAC,MAAM,EAAI;AAAA,UACxBC,YADwB,GACPD,MADO,CACxBC,YADwB;;AAGhC,YAAKC,QAAL,CAAc;AAAED,QAAAA,YAAY,EAAZA;AAAF,OAAd;AACH,KAxBkB;;AAAA,UA0BnBE,0BA1BmB,GA0BU,UAAAH,MAAM,EAAI;AACnC,YAAKE,QAAL,CAAc;AAAEE,QAAAA,kBAAkB,EAAEJ,MAAM,CAACK;AAA7B,OAAd;AACH,KA5BkB;;AAAA,UA8BnBC,cA9BmB,GA8BF,UAAAC,KAAK,EAAI;AAAA,UACdH,kBADc,GACS,MAAKI,KADd,CACdJ,kBADc;AAEtB,UAAI,CAACd,oBAAoB,CAACc,kBAAD,CAAzB,EAA+C;;AAE/C,YAAKF,QAAL,CAAc;AAAEO,QAAAA,QAAQ,EAAEF,KAAK,CAACG;AAAlB,OAAd;AACH,KAnCkB;;AAAA,UAqCnBC,eArCmB,GAqCD,YAAM;AACpB,YAAKT,QAAL,CAAc;AAAEO,QAAAA,QAAQ,EAAE;AAAZ,OAAd;AACH,KAvCkB;;AAAA,UAyCnBG,kBAzCmB;AAAA;AAAA;AAAA;AAAA,6BAyCE;AAAA;AAAA;AAAA;AAAA;AACjB,oBAAKD,eAAL,GADiB,CAGjB;;;AAHiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAzCF;;AAAA,UA+CnBE,cA/CmB,GA+CF,UAAAN,KAAK,EAAI;AACtB,YAAKI,eAAL;AACH,KAjDkB;;AAAA,UAmDnBG,cAnDmB,GAmDF,UAAAP,KAAK,EAAI;AACtB,YAAKI,eAAL;;AAEAf,MAAAA,eAAe,CAACmB,YAAhB,CAA6B;AACzB,iBAAS,sBADgB;AAEzBC,QAAAA,IAAI,EAAE;AAFmB,OAA7B;AAIH,KA1DkB;;AAAA,UA4DnBC,cA5DmB,GA4DF,UAAAV,KAAK,EAAI;AACtB,YAAKI,eAAL;;AAEApB,MAAAA,WAAW;AACd,KAhEkB;;AAAA,UAkEnB2B,WAlEmB;AAAA;AAAA;AAAA;AAAA;AAAA,+BAkEL,kBAAMX,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACV,sBAAKI,eAAL;;AADU;AAAA,uBAGSf,eAAe,CAACuB,IAAhB,CAAqB;AACpC,2BAAS,mBAD2B;AAEpCC,kBAAAA,OAAO,EAAEzB,SAAS,CAAC0B,OAAV,EAF2B;AAGpCC,kBAAAA,KAAK,EAAE;AAH6B,iBAArB,CAHT;;AAAA;AAGJC,gBAAAA,IAHI;;AAAA,oBAQLA,IARK;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAUV/B,gBAAAA,QAAQ,CAAC+B,IAAI,CAACC,EAAN,CAAR;;AAVU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAlEK;;AAAA;AAAA;AAAA;AAAA;;AAAA,UA+EnBC,cA/EmB;AAAA;AAAA;AAAA;AAAA;AAAA,+BA+EF,kBAAMlB,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACb,sBAAKI,eAAL;;AADa;AAAA,uBAGMf,eAAe,CAACuB,IAAhB,CAAqB;AACpC,2BAAS,mBAD2B;AAEpCC,kBAAAA,OAAO,EAAEzB,SAAS,CAAC0B,OAAV,EAF2B;AAGpCC,kBAAAA,KAAK,EAAE;AAH6B,iBAArB,CAHN;;AAAA;AAGPC,gBAAAA,IAHO;;AAAA,oBAQRA,IARQ;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAUb3B,gBAAAA,eAAe,CAACmB,YAAhB,CAA6B;AACzB,2BAAS,sBADgB;AAEzBC,kBAAAA,IAAI,EAAE,IAFmB;AAGzBU,kBAAAA,MAAM,EAAEH,IAAI,CAACC;AAHY,iBAA7B;;AAVa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OA/EE;;AAAA;AAAA;AAAA;AAAA;;AAAA,UAgGnBG,UAhGmB,GAgGN,UAAApB,KAAK,EAAI;AAClB,YAAKI,eAAL;AACH,KAlGkB;;AAAA,UAoGnBiB,YApGmB,GAoGJ,YAAM;AACjB,YAAKjB,eAAL;;AAEAlB,MAAAA,UAAU,CAAC,CAAD,CAAV;AACH,KAxGkB;;AAGf,UAAKe,KAAL,GAAa;AACTJ,MAAAA,kBAAkB,EAAEV,QAAQ,CAACmC,qBAAT,EADX;AAETpB,MAAAA,QAAQ,EAAE,IAFD;AAGTR,MAAAA,YAAY,EAAEP,QAAQ,CAACO;AAHd,KAAb;AAHe;AAQlB;;;;wCAEmB;AAChBP,MAAAA,QAAQ,CAACoC,EAAT,CAAY,0BAAZ,EAAwC,KAAK3B,0BAA7C;AACAT,MAAAA,QAAQ,CAACoC,EAAT,CAAY,uBAAZ,EAAqC,KAAK/B,uBAA1C;AACH;;;2CAEsB;AACnBL,MAAAA,QAAQ,CAACqC,GAAT,CAAa,0BAAb,EAAyC,KAAK5B,0BAA9C;AACAT,MAAAA,QAAQ,CAACqC,GAAT,CAAa,uBAAb,EAAsC,KAAKhC,uBAA3C;AACH;;;6BAwFQ;AAAA,wBAC6C,KAAKD,KADlD;AAAA,UACGkC,CADH,eACGA,CADH;AAAA,UACMC,OADN,eACMA,OADN;AAAA,UACeC,KADf,eACeA,KADf;AAAA,UACsBC,SADtB,eACsBA,SADtB;AAAA,UACiCC,OADjC,eACiCA,OADjC;AAAA,wBAEkD,KAAK5B,KAFvD;AAAA,UAEGC,QAFH,eAEGA,QAFH;AAAA,UAEaL,kBAFb,eAEaA,kBAFb;AAAA,UAEiCH,YAFjC,eAEiCA,YAFjC;AAIL,UAAMoC,eAAe,GACjB,CAACF,SAAD,IAAc7C,oBAAoB,CAACc,kBAAD,CAAlC,GACI,oBAAC,IAAD;AACI,QAAA,EAAE,EAAC,WADP;AAEI,QAAA,QAAQ,EAAEK,QAFd;AAGI,QAAA,IAAI,EAAE6B,OAAO,CAAC7B,QAAD,CAHjB;AAII,QAAA,OAAO,EAAE,KAAKE,eAJlB;AAKI,QAAA,kBAAkB,EAAE,IALxB;AAMI,QAAA,oBAAoB,MANxB;AAOI,QAAA,mBAAmB,EAAE,IAPzB;AAQI,QAAA,YAAY,EAAE;AACV4B,UAAAA,QAAQ,EAAE,QADA;AAEVC,UAAAA,UAAU,EAAE;AAFF,SARlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAYI,oBAAC,QAAD;AAAU,QAAA,OAAO,EAAE,KAAK3B,cAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADJ,EAII,oBAAC,YAAD;AAAc,QAAA,OAAO,EAAEmB,CAAC,CAAC,UAAD,CAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJJ,CAZJ,EAkBM/B,YAAY,IACV,oBAAC,QAAD;AAAU,QAAA,OAAO,EAAE,KAAK2B,YAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADJ,EAII,oBAAC,YAAD;AAAc,QAAA,OAAO,EAAEI,CAAC,CAAC,QAAD,CAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJJ,CAnBR,EA0BI,oBAAC,QAAD;AAAU,QAAA,OAAO,EAAE,KAAKlB,cAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADJ,EAII,oBAAC,YAAD;AAAc,QAAA,OAAO,EAAEkB,CAAC,CAAC,UAAD,CAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJJ,CA1BJ,EAgCI,oBAAC,QAAD;AAAU,QAAA,OAAO,EAAE,KAAKf,cAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADJ,EAII,oBAAC,YAAD;AAAc,QAAA,OAAO,EAAEe,CAAC,CAAC,UAAD,CAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJJ,CAhCJ,EAsCI,oBAAC,QAAD;AAAU,QAAA,OAAO,EAAE,KAAKd,WAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADJ,EAII,oBAAC,YAAD;AAAc,QAAA,OAAO,EAAEc,CAAC,CAAC,OAAD,CAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJJ,CAtCJ,EA4CI,oBAAC,QAAD;AAAU,QAAA,OAAO,EAAE,KAAKP,cAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADJ,EAII,oBAAC,YAAD;AAAc,QAAA,OAAO,EAAEO,CAAC,CAAC,UAAD,CAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJJ,CA5CJ,EAkDI,oBAAC,QAAD;AAAU,QAAA,OAAO,EAAE,KAAKL,UAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADJ,EAII,oBAAC,YAAD;AAAc,QAAA,OAAO,EAAEK,CAAC,CAAC,cAAD,CAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJJ,CAlDJ,CADJ,GA0DI,IA3DR;AA6DA,UAAMS,SAAS,GAAGP,KAAK,GACjB,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADiB,GAEjB,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFN;AAIA,aACI,0CACI,oBAAC,UAAD;AACI,qBAAWzB,QAAQ,GAAG,aAAH,GAAmB,IAD1C;AAEI,yBAAc,MAFlB;AAGI,QAAA,SAAS,EAAC,qCAHd;AAII,sBAAW,MAJf;AAKI,QAAA,OAAO,EAAE0B,SAAS,GAAGC,OAAH,GAAa,KAAK9B,cALxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMM2B,OAAO,GACF,oBAAC,aAAD;AAAe,QAAA,IAAI,EAAEE,SAArB;AAAgC,QAAA,QAAQ,EAAE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAA1C;AAA6D,QAAA,IAAI,EAAE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADE,GAEF,0CAAGA,SAAS,GAAGM,SAAH,GAAe,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA3B,CARX,CADJ,EAaKJ,eAbL,CADJ;AAiBH;;;;EAjMwBjE,KAAK,CAACsE,S;;AAoMnC,eAAerE,eAAe,GAAGwB,cAAH,CAA9B","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { withTranslation } from 'react-i18next';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport ArrowBackIcon from '../../Assets/Icons/Back';\nimport CloseIcon from '../../Assets/Icons/Close';\nimport ArchiveIcon from '../../Assets/Icons/Archive';\nimport SearchIcon from '../../Assets/Icons/Search';\nimport MenuIcon from '../../Assets/Icons/Menu';\nimport GroupIcon from '../../Assets/Icons/Group';\nimport HelpIcon from '../../Assets/Icons/Help';\nimport SavedIcon from '../../Assets/Icons/Saved';\nimport SettingsIcon from '../../Assets/Icons/Settings';\nimport UserIcon from '../../Assets/Icons/User';\nimport { isAuthorizationReady } from '../../Utils/Common';\nimport { openArchive, openChat, searchChat } from '../../Actions/Client';\nimport AppStore from '../../Stores/ApplicationStore';\nimport UserStore from '../../Stores/UserStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './MainMenuButton.css';\n\nclass MainMenuButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            authorizationState: AppStore.getAuthorizationState(),\n            anchorEl: null,\n            isSmallWidth: AppStore.isSmallWidth\n        };\n    }\n\n    componentDidMount() {\n        AppStore.on('updateAuthorizationState', this.onUpdateAuthorizationState);\n        AppStore.on('clientUpdatePageWidth', this.onClientUpdatePageWidth);\n    }\n\n    componentWillUnmount() {\n        AppStore.off('updateAuthorizationState', this.onUpdateAuthorizationState);\n        AppStore.off('clientUpdatePageWidth', this.onClientUpdatePageWidth);\n    }\n\n    onClientUpdatePageWidth = update => {\n        const { isSmallWidth } = update;\n\n        this.setState({ isSmallWidth });\n    };\n\n    onUpdateAuthorizationState = update => {\n        this.setState({ authorizationState: update.authorization_state });\n    };\n\n    handleMenuOpen = event => {\n        const { authorizationState } = this.state;\n        if (!isAuthorizationReady(authorizationState)) return;\n\n        this.setState({ anchorEl: event.currentTarget });\n    };\n\n    handleMenuClose = () => {\n        this.setState({ anchorEl: null });\n    };\n\n    handleCheckUpdates = async () => {\n        this.handleMenuClose();\n\n        //await update();\n    };\n\n    handleNewGroup = event => {\n        this.handleMenuClose();\n    };\n\n    handleContacts = event => {\n        this.handleMenuClose();\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateContacts',\n            open: true\n        });\n    };\n\n    handleArchived = event => {\n        this.handleMenuClose();\n\n        openArchive();\n    };\n\n    handleSaved = async event => {\n        this.handleMenuClose();\n\n        const chat = await TdLibController.send({\n            '@type': 'createPrivateChat',\n            user_id: UserStore.getMyId(),\n            force: true\n        });\n        if (!chat) return;\n\n        openChat(chat.id);\n    };\n\n    handleSettings = async event => {\n        this.handleMenuClose();\n\n        const chat = await TdLibController.send({\n            '@type': 'createPrivateChat',\n            user_id: UserStore.getMyId(),\n            force: true\n        });\n        if (!chat) return;\n\n        TdLibController.clientUpdate({\n            '@type': 'clientUpdateSettings',\n            open: true,\n            chatId: chat.id\n        });\n    };\n\n    handleHelp = event => {\n        this.handleMenuClose();\n    };\n\n    handleSearch = () => {\n        this.handleMenuClose();\n\n        searchChat(0);\n    };\n\n    render() {\n        const { t, timeout, popup, showClose, onClose } = this.props;\n        const { anchorEl, authorizationState, isSmallWidth } = this.state;\n\n        const mainMenuControl =\n            !showClose && isAuthorizationReady(authorizationState) ? (\n                <Menu\n                    id='main-menu'\n                    anchorEl={anchorEl}\n                    open={Boolean(anchorEl)}\n                    onClose={this.handleMenuClose}\n                    getContentAnchorEl={null}\n                    disableAutoFocusItem\n                    disableRestoreFocus={true}\n                    anchorOrigin={{\n                        vertical: 'bottom',\n                        horizontal: 'left'\n                    }}>\n                    <MenuItem onClick={this.handleNewGroup}>\n                        <ListItemIcon>\n                            <GroupIcon />\n                        </ListItemIcon>\n                        <ListItemText primary={t('NewGroup')} />\n                    </MenuItem>\n                    { isSmallWidth && (\n                        <MenuItem onClick={this.handleSearch}>\n                            <ListItemIcon>\n                                <SearchIcon />\n                            </ListItemIcon>\n                            <ListItemText primary={t('Search')} />\n                        </MenuItem>\n                    )}\n                    <MenuItem onClick={this.handleContacts}>\n                        <ListItemIcon>\n                            <UserIcon />\n                        </ListItemIcon>\n                        <ListItemText primary={t('Contacts')} />\n                    </MenuItem>\n                    <MenuItem onClick={this.handleArchived}>\n                        <ListItemIcon>\n                            <ArchiveIcon />\n                        </ListItemIcon>\n                        <ListItemText primary={t('Archived')} />\n                    </MenuItem>\n                    <MenuItem onClick={this.handleSaved}>\n                        <ListItemIcon>\n                            <SavedIcon />\n                        </ListItemIcon>\n                        <ListItemText primary={t('Saved')} />\n                    </MenuItem>\n                    <MenuItem onClick={this.handleSettings}>\n                        <ListItemIcon>\n                            <SettingsIcon />\n                        </ListItemIcon>\n                        <ListItemText primary={t('Settings')} />\n                    </MenuItem>\n                    <MenuItem onClick={this.handleHelp}>\n                        <ListItemIcon>\n                            <HelpIcon />\n                        </ListItemIcon>\n                        <ListItemText primary={t('SettingsHelp')} />\n                    </MenuItem>\n                </Menu>\n            ) : null;\n\n        const closeIcon = popup\n            ? <CloseIcon/>\n            : <ArrowBackIcon/>;\n\n        return (\n            <>\n                <IconButton\n                    aria-owns={anchorEl ? 'simple-menu' : null}\n                    aria-haspopup='true'\n                    className='header-left-button main-menu-button'\n                    aria-label='Menu'\n                    onClick={showClose ? onClose : this.handleMenuOpen}>\n                    { timeout\n                        ? (<SpeedDialIcon open={showClose} openIcon={<ArrowBackIcon />} icon={<MenuIcon />} />)\n                        : (<>{showClose ? closeIcon : <MenuIcon />}</>)\n                    }\n\n                </IconButton>\n                {mainMenuControl}\n            </>\n        );\n    }\n}\n\nexport default withTranslation()(MainMenuButton);\n"]},"metadata":{},"sourceType":"module"}